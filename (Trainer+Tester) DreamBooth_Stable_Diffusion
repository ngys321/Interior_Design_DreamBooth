{"cells":[{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1378,"status":"ok","timestamp":1671428715596,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"XU7NuMAA2drw","outputId":"7c5526e9-2f88-4bc4-c191-40f94ef858a0"},"outputs":[{"output_type":"stream","name":"stdout","text":["Tesla T4, 15109 MiB, 15109 MiB\n"]}],"source":["#@title 1-1. Check type of GPU and VRAM available.\n","!nvidia-smi --query-gpu=name,memory.total,memory.free --format=csv,noheader"]},{"cell_type":"markdown","metadata":{"id":"BzM7j0ZSc_9c"},"source":["https://github.com/ShivamShrirao/diffusers/tree/main/examples/dreambooth"]},{"cell_type":"markdown","metadata":{"id":"wnTMyW41cC1E"},"source":["## 1-2. Install Requirements"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":11972,"status":"ok","timestamp":1671428727564,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"fZbeOqu6EUoz","outputId":"4647168d-2aa1-4580-b029-6ac6330f7b9c"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Requirement already satisfied: torchvision in /usr/local/lib/python3.8/dist-packages (0.14.0+cu116)\n","Requirement already satisfied: torch==1.13.0 in /usr/local/lib/python3.8/dist-packages (from torchvision) (1.13.0+cu116)\n","Requirement already satisfied: requests in /usr/local/lib/python3.8/dist-packages (from torchvision) (2.25.1)\n","Requirement already satisfied: numpy in /usr/local/lib/python3.8/dist-packages (from torchvision) (1.21.6)\n","Requirement already satisfied: typing-extensions in /usr/local/lib/python3.8/dist-packages (from torchvision) (4.4.0)\n","Requirement already satisfied: pillow!=8.3.*,>=5.3.0 in /usr/local/lib/python3.8/dist-packages (from torchvision) (9.3.0)\n","Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.8/dist-packages (from requests->torchvision) (2.10)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.8/dist-packages (from requests->torchvision) (2022.12.7)\n","Requirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.8/dist-packages (from requests->torchvision) (1.26.12)\n","Requirement already satisfied: chardet<5,>=3.0.2 in /usr/local/lib/python3.8/dist-packages (from requests->torchvision) (3.0.4)\n","Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Requirement already satisfied: tensorboard in /usr/local/lib/python3.8/dist-packages (2.10.1)\n","Requirement already satisfied: werkzeug>=1.0.1 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (1.0.1)\n","Requirement already satisfied: numpy>=1.12.0 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (1.21.6)\n","Requirement already satisfied: protobuf<3.20,>=3.9.2 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (3.19.6)\n","Requirement already satisfied: tensorboard-data-server<0.7.0,>=0.6.0 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (0.6.1)\n","Requirement already satisfied: google-auth-oauthlib<0.5,>=0.4.1 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (0.4.6)\n","Requirement already satisfied: wheel>=0.26 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (0.38.4)\n","Requirement already satisfied: grpcio>=1.24.3 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (1.51.1)\n","Requirement already satisfied: requests<3,>=2.21.0 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (2.25.1)\n","Requirement already satisfied: markdown>=2.6.8 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (3.4.1)\n","Requirement already satisfied: setuptools>=41.0.0 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (57.4.0)\n","Requirement already satisfied: tensorboard-plugin-wit>=1.6.0 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (1.8.1)\n","Requirement already satisfied: absl-py>=0.4 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (1.3.0)\n","Requirement already satisfied: google-auth<3,>=1.6.3 in /usr/local/lib/python3.8/dist-packages (from tensorboard) (2.15.0)\n","Requirement already satisfied: six>=1.9.0 in /usr/local/lib/python3.8/dist-packages (from google-auth<3,>=1.6.3->tensorboard) (1.15.0)\n","Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.8/dist-packages (from google-auth<3,>=1.6.3->tensorboard) (4.9)\n","Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.8/dist-packages (from google-auth<3,>=1.6.3->tensorboard) (0.2.8)\n","Requirement already satisfied: cachetools<6.0,>=2.0.0 in /usr/local/lib/python3.8/dist-packages (from google-auth<3,>=1.6.3->tensorboard) (5.2.0)\n","Requirement already satisfied: requests-oauthlib>=0.7.0 in /usr/local/lib/python3.8/dist-packages (from google-auth-oauthlib<0.5,>=0.4.1->tensorboard) (1.3.1)\n","Requirement already satisfied: importlib-metadata>=4.4 in /usr/local/lib/python3.8/dist-packages (from markdown>=2.6.8->tensorboard) (5.1.0)\n","Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.8/dist-packages (from importlib-metadata>=4.4->markdown>=2.6.8->tensorboard) (3.11.0)\n","Requirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.8/dist-packages (from pyasn1-modules>=0.2.1->google-auth<3,>=1.6.3->tensorboard) (0.4.8)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.8/dist-packages (from requests<3,>=2.21.0->tensorboard) (2022.12.7)\n","Requirement already satisfied: chardet<5,>=3.0.2 in /usr/local/lib/python3.8/dist-packages (from requests<3,>=2.21.0->tensorboard) (3.0.4)\n","Requirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.8/dist-packages (from requests<3,>=2.21.0->tensorboard) (1.26.12)\n","Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.8/dist-packages (from requests<3,>=2.21.0->tensorboard) (2.10)\n","Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.8/dist-packages (from requests-oauthlib>=0.7.0->google-auth-oauthlib<0.5,>=0.4.1->tensorboard) (3.2.2)\n","Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Requirement already satisfied: modelcards in /usr/local/lib/python3.8/dist-packages (0.1.6)\n","Requirement already satisfied: pyyaml>=5.1 in /usr/local/lib/python3.8/dist-packages (from modelcards) (6.0)\n","Requirement already satisfied: huggingface-hub>=0.8.1 in /usr/local/lib/python3.8/dist-packages (from modelcards) (0.11.1)\n","Requirement already satisfied: Jinja2 in /usr/local/lib/python3.8/dist-packages (from modelcards) (2.11.3)\n","Requirement already satisfied: tqdm in /usr/local/lib/python3.8/dist-packages (from huggingface-hub>=0.8.1->modelcards) (4.64.1)\n","Requirement already satisfied: typing-extensions>=3.7.4.3 in /usr/local/lib/python3.8/dist-packages (from huggingface-hub>=0.8.1->modelcards) (4.4.0)\n","Requirement already satisfied: packaging>=20.9 in /usr/local/lib/python3.8/dist-packages (from huggingface-hub>=0.8.1->modelcards) (21.3)\n","Requirement already satisfied: filelock in /usr/local/lib/python3.8/dist-packages (from huggingface-hub>=0.8.1->modelcards) (3.8.2)\n","Requirement already satisfied: requests in /usr/local/lib/python3.8/dist-packages (from huggingface-hub>=0.8.1->modelcards) (2.25.1)\n","Requirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /usr/local/lib/python3.8/dist-packages (from packaging>=20.9->huggingface-hub>=0.8.1->modelcards) (3.0.9)\n","Requirement already satisfied: MarkupSafe>=0.23 in /usr/local/lib/python3.8/dist-packages (from Jinja2->modelcards) (2.0.1)\n","Requirement already satisfied: chardet<5,>=3.0.2 in /usr/local/lib/python3.8/dist-packages (from requests->huggingface-hub>=0.8.1->modelcards) (3.0.4)\n","Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.8/dist-packages (from requests->huggingface-hub>=0.8.1->modelcards) (2.10)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.8/dist-packages (from requests->huggingface-hub>=0.8.1->modelcards) (2022.12.7)\n","Requirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.8/dist-packages (from requests->huggingface-hub>=0.8.1->modelcards) (1.26.12)\n"]}],"source":["!pip install torchvision\n","!pip install tensorboard\n","!pip install modelcards"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":25222,"status":"ok","timestamp":1671428752763,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"aLWXPZqjsZVV","outputId":"27d4c4f7-56ae-4d3d-9d9f-9a772b13e723"},"outputs":[{"output_type":"stream","name":"stdout","text":["  Installing build dependencies ... \u001b[?25l\u001b[?25hdone\n","  Getting requirements to build wheel ... \u001b[?25l\u001b[?25hdone\n","    Preparing wheel metadata ... \u001b[?25l\u001b[?25hdone\n"]}],"source":["!wget -q https://github.com/ShivamShrirao/diffusers/raw/main/examples/dreambooth/train_dreambooth.py\n","!wget -q https://github.com/ShivamShrirao/diffusers/raw/main/scripts/convert_diffusers_to_original_stable_diffusion.py\n","%pip install -qq git+https://github.com/ShivamShrirao/diffusers\n","%pip install -q -U --pre triton\n","%pip install -q accelerate==0.12.0 transformers ftfy bitsandbytes gradio natsort"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"y4lqqWT_uxD2"},"outputs":[],"source":["#@title 1-3. Login to HuggingFace 🤗\n","\n","#@markdown You need to accept the model license before downloading or using the Stable Diffusion weights. Please, visit the [model card](https://huggingface.co/runwayml/stable-diffusion-v1-5), read the license and tick the checkbox if you agree. You have to be a registered user in 🤗 Hugging Face Hub, and you'll also need to use an access token for the code to work.\n","# https://huggingface.co/settings/tokens\n","!mkdir -p ~/.huggingface\n","HUGGINGFACE_TOKEN = \"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\" #@param {type:\"string\"}\n","!echo -n \"{HUGGINGFACE_TOKEN}\" > ~/.huggingface/token"]},{"cell_type":"markdown","metadata":{"id":"XfTlc8Mqb8iH"},"source":["## 1-4. Install xformers from precompiled wheel."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":7598,"status":"ok","timestamp":1671428762381,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"n6dcjPnnaiCn","outputId":"5b12c79d-c13b-4652-c9ca-ee3a0416bfbc"},"outputs":[{"output_type":"stream","name":"stdout","text":["\u001b[K     |████████████████████████████████| 47.4 MB 3.1 MB/s \n","\u001b[?25h"]}],"source":["%pip install -q https://github.com/brian6091/xformers-wheels/releases/download/0.0.15.dev0%2B4c06c79/xformers-0.0.15.dev0+4c06c79.d20221205-cp38-cp38-linux_x86_64.whl\n","# These were compiled on Tesla T4.\n","\n","# If precompiled wheels don't work, install it with the following command. It will take around 40 minutes to compile.\n","# %pip install git+https://github.com/facebookresearch/xformers@4c06c79#egg=xformers"]},{"cell_type":"markdown","metadata":{"id":"G0NV324ZcL9L"},"source":["## 1-5. Settings base model & directory and run"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":2632,"status":"ok","timestamp":1671428764983,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"Rxg0y5MBudmd","outputId":"518ef7bf-9a60-409c-a0fe-3e163729d74f"},"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/gdrive; to attempt to forcibly remount, call drive.mount(\"/content/gdrive\", force_remount=True).\n","[*] Weights will be saved at /content/gdrive/MyDrive/2-4_4e_2200\n"]}],"source":["#@markdown If model weights should be saved directly in google drive (takes around 4-5 GB). \n","#@markdown 용량 많이 차지하므로 unchecked!\n","save_to_gdrive = True #@param {type:\"boolean\"}\n","if save_to_gdrive:\n","    from google.colab import drive\n","    drive.mount('/content/gdrive')\n","\n","#@markdown Name/Path of the initial model.\n","MODEL_NAME = \"runwayml/stable-diffusion-v1-5\" #@param {type:\"string\"}\n","\n","#@markdown Enter the directory name to save model at.\n","\n","OUTPUT_DIR = \"2-4_4e_2200\" #@param {type:\"string\"}\n","if save_to_gdrive:\n","    OUTPUT_DIR = \"/content/gdrive/MyDrive/\" + OUTPUT_DIR\n","else:\n","    OUTPUT_DIR = \"/content/\" + OUTPUT_DIR\n","\n","print(f\"[*] Weights will be saved at {OUTPUT_DIR}\")\n","\n","!mkdir -p $OUTPUT_DIR"]},{"cell_type":"markdown","metadata":{"id":"qn5ILIyDJIcX"},"source":["# 2-1. Start Training\n","\n","Use the table below to choose the best flags based on your memory and speed requirements. Tested on Tesla T4 GPU.\n","\n","\n","| `fp16` | `train_batch_size` | `gradient_accumulation_steps` | `gradient_checkpointing` | `use_8bit_adam` | GB VRAM usage | Speed (it/s) |\n","| ---- | ------------------ | ----------------------------- | ----------------------- | --------------- | ---------- | ------------ |\n","| fp16 | 1                  | 1                             | TRUE                    | TRUE            | 9.92       | 0.93         |\n","| no   | 1                  | 1                             | TRUE                    | TRUE            | 10.08      | 0.42         |\n","| fp16 | 2                  | 1                             | TRUE                    | TRUE            | 10.4       | 0.66         |\n","| fp16 | 1                  | 1                             | FALSE                   | TRUE            | 11.17      | 1.14         |\n","| no   | 1                  | 1                             | FALSE                   | TRUE            | 11.17      | 0.49         |\n","| fp16 | 1                  | 2                             | TRUE                    | TRUE            | 11.56      | 1            |\n","| fp16 | 2                  | 1                             | FALSE                   | TRUE            | 13.67      | 0.82         |\n","| fp16 | 1                  | 2                             | FALSE                   | TRUE            | 13.7       | 0.83          |\n","| fp16 | 1                  | 1                             | TRUE                    | FALSE           | 15.79      | 0.77         |\n"]},{"cell_type":"markdown","metadata":{"id":"-ioxxvHoicPs"},"source":["Add `--gradient_checkpointing` flag for around 9.92 GB VRAM usage.\n","\n","remove `--use_8bit_adam` flag for full precision. Requires 15.79 GB with `--gradient_checkpointing` else 17.8 GB.\n","\n","remove `--train_text_encoder` flag to reduce memory usage further, degrades output quality."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"5vDpCxId1aCm"},"outputs":[],"source":["# You can also add multiple concepts here. Try tweaking `--max_train_steps` accordingly.\n","\n","concepts_list = [\n","    {\n","        \"instance_prompt\":      \"photo of rkrn design chair\",\n","        \"class_prompt\":         \"photo of a design chair\",\n","        \"instance_data_dir\":    \"/content/gdrive/MyDrive/data/design chair_instance\",\n","        \"class_data_dir\":       \"/content/gdrive/MyDrive/data/design chair_class\"\n","    },\n","#     {\n","#         \"instance_prompt\":      \"photo of ukj person\",\n","#         \"class_prompt\":         \"photo of a person\",\n","#         \"instance_data_dir\":    \"/content/data/ukj\",\n","#         \"class_data_dir\":       \"/content/data/person\"\n","#     }\n","]\n","\n","# `class_data_dir` contains regularization images\n","import json\n","import os\n","for c in concepts_list:\n","    os.makedirs(c[\"instance_data_dir\"], exist_ok=True)\n","\n","with open(\"concepts_list.json\", \"w\") as f:\n","    json.dump(concepts_list, f, indent=4)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"32gYIDDR1aCp","colab":{"base_uri":"https://localhost:8080/","height":403},"executionInfo":{"status":"ok","timestamp":1671420856128,"user_tz":-540,"elapsed":368469,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"}},"outputId":"a17c3af2-7090-420d-92b3-be2851a85a70"},"outputs":[{"output_type":"stream","name":"stdout","text":["Uploading instance images for `photo of rkrn design chair`\n"]},{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.HTML object>"],"text/html":["\n","     <input type=\"file\" id=\"files-c7650cf0-b749-4375-a63b-acfed79f8acf\" name=\"files[]\" multiple disabled\n","        style=\"border:none\" />\n","     <output id=\"result-c7650cf0-b749-4375-a63b-acfed79f8acf\">\n","      Upload widget is only available when the cell has been executed in the\n","      current browser session. Please rerun this cell to enable.\n","      </output>\n","      <script>// Copyright 2017 Google LLC\n","//\n","// Licensed under the Apache License, Version 2.0 (the \"License\");\n","// you may not use this file except in compliance with the License.\n","// You may obtain a copy of the License at\n","//\n","//      http://www.apache.org/licenses/LICENSE-2.0\n","//\n","// Unless required by applicable law or agreed to in writing, software\n","// distributed under the License is distributed on an \"AS IS\" BASIS,\n","// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n","// See the License for the specific language governing permissions and\n","// limitations under the License.\n","\n","/**\n"," * @fileoverview Helpers for google.colab Python module.\n"," */\n","(function(scope) {\n","function span(text, styleAttributes = {}) {\n","  const element = document.createElement('span');\n","  element.textContent = text;\n","  for (const key of Object.keys(styleAttributes)) {\n","    element.style[key] = styleAttributes[key];\n","  }\n","  return element;\n","}\n","\n","// Max number of bytes which will be uploaded at a time.\n","const MAX_PAYLOAD_SIZE = 100 * 1024;\n","\n","function _uploadFiles(inputId, outputId) {\n","  const steps = uploadFilesStep(inputId, outputId);\n","  const outputElement = document.getElementById(outputId);\n","  // Cache steps on the outputElement to make it available for the next call\n","  // to uploadFilesContinue from Python.\n","  outputElement.steps = steps;\n","\n","  return _uploadFilesContinue(outputId);\n","}\n","\n","// This is roughly an async generator (not supported in the browser yet),\n","// where there are multiple asynchronous steps and the Python side is going\n","// to poll for completion of each step.\n","// This uses a Promise to block the python side on completion of each step,\n","// then passes the result of the previous step as the input to the next step.\n","function _uploadFilesContinue(outputId) {\n","  const outputElement = document.getElementById(outputId);\n","  const steps = outputElement.steps;\n","\n","  const next = steps.next(outputElement.lastPromiseValue);\n","  return Promise.resolve(next.value.promise).then((value) => {\n","    // Cache the last promise value to make it available to the next\n","    // step of the generator.\n","    outputElement.lastPromiseValue = value;\n","    return next.value.response;\n","  });\n","}\n","\n","/**\n"," * Generator function which is called between each async step of the upload\n"," * process.\n"," * @param {string} inputId Element ID of the input file picker element.\n"," * @param {string} outputId Element ID of the output display.\n"," * @return {!Iterable<!Object>} Iterable of next steps.\n"," */\n","function* uploadFilesStep(inputId, outputId) {\n","  const inputElement = document.getElementById(inputId);\n","  inputElement.disabled = false;\n","\n","  const outputElement = document.getElementById(outputId);\n","  outputElement.innerHTML = '';\n","\n","  const pickedPromise = new Promise((resolve) => {\n","    inputElement.addEventListener('change', (e) => {\n","      resolve(e.target.files);\n","    });\n","  });\n","\n","  const cancel = document.createElement('button');\n","  inputElement.parentElement.appendChild(cancel);\n","  cancel.textContent = 'Cancel upload';\n","  const cancelPromise = new Promise((resolve) => {\n","    cancel.onclick = () => {\n","      resolve(null);\n","    };\n","  });\n","\n","  // Wait for the user to pick the files.\n","  const files = yield {\n","    promise: Promise.race([pickedPromise, cancelPromise]),\n","    response: {\n","      action: 'starting',\n","    }\n","  };\n","\n","  cancel.remove();\n","\n","  // Disable the input element since further picks are not allowed.\n","  inputElement.disabled = true;\n","\n","  if (!files) {\n","    return {\n","      response: {\n","        action: 'complete',\n","      }\n","    };\n","  }\n","\n","  for (const file of files) {\n","    const li = document.createElement('li');\n","    li.append(span(file.name, {fontWeight: 'bold'}));\n","    li.append(span(\n","        `(${file.type || 'n/a'}) - ${file.size} bytes, ` +\n","        `last modified: ${\n","            file.lastModifiedDate ? file.lastModifiedDate.toLocaleDateString() :\n","                                    'n/a'} - `));\n","    const percent = span('0% done');\n","    li.appendChild(percent);\n","\n","    outputElement.appendChild(li);\n","\n","    const fileDataPromise = new Promise((resolve) => {\n","      const reader = new FileReader();\n","      reader.onload = (e) => {\n","        resolve(e.target.result);\n","      };\n","      reader.readAsArrayBuffer(file);\n","    });\n","    // Wait for the data to be ready.\n","    let fileData = yield {\n","      promise: fileDataPromise,\n","      response: {\n","        action: 'continue',\n","      }\n","    };\n","\n","    // Use a chunked sending to avoid message size limits. See b/62115660.\n","    let position = 0;\n","    do {\n","      const length = Math.min(fileData.byteLength - position, MAX_PAYLOAD_SIZE);\n","      const chunk = new Uint8Array(fileData, position, length);\n","      position += length;\n","\n","      const base64 = btoa(String.fromCharCode.apply(null, chunk));\n","      yield {\n","        response: {\n","          action: 'append',\n","          file: file.name,\n","          data: base64,\n","        },\n","      };\n","\n","      let percentDone = fileData.byteLength === 0 ?\n","          100 :\n","          Math.round((position / fileData.byteLength) * 100);\n","      percent.textContent = `${percentDone}% done`;\n","\n","    } while (position < fileData.byteLength);\n","  }\n","\n","  // All done.\n","  yield {\n","    response: {\n","      action: 'complete',\n","    }\n","  };\n","}\n","\n","scope.google = scope.google || {};\n","scope.google.colab = scope.google.colab || {};\n","scope.google.colab._files = {\n","  _uploadFiles,\n","  _uploadFilesContinue,\n","};\n","})(self);\n","</script> "]},"metadata":{}},{"output_type":"stream","name":"stdout","text":["Saving rkrn (1).jpg to rkrn (1).jpg\n","Saving rkrn (2).jpg to rkrn (2).jpg\n","Saving rkrn (3).jpg to rkrn (3).jpg\n","Saving rkrn (4).jpg to rkrn (4).jpg\n","Saving rkrn (5).jpg to rkrn (5).jpg\n","Saving rkrn (6).jpg to rkrn (6).jpg\n","Saving rkrn (7).jpg to rkrn (7).jpg\n","Saving rkrn (8).jpg to rkrn (8).jpg\n","Saving rkrn (9).jpg to rkrn (9).jpg\n","Saving rkrn (10).jpg to rkrn (10).jpg\n"]}],"source":["#@title 2-2. Upload your images by running this cell. OR You can use the file manager on the left panel to upload (drag and drop) to each `instance_data_dir` (it uploads faster)\n","\n","#@markdown => 직접 gdrive/MyDrive/data/해당 instace 폴더에 이미지 업로드하기\n","\n","import os\n","from google.colab import files\n","import shutil\n","\n","for c in concepts_list:\n","    print(f\"Uploading instance images for `{c['instance_prompt']}`\")\n","    uploaded = files.upload()\n","    for filename in uploaded.keys():\n","        dst_path = os.path.join(c['instance_data_dir'], filename)\n","        shutil.move(filename, dst_path)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"95tTKzrsD4HR"},"outputs":[],"source":["#@title 2-3. accelerate config\n","\n","from accelerate.utils import write_basic_config\n","write_basic_config()"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":2357243,"status":"ok","timestamp":1671424914889,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"jjcSXTp-u-Eg","outputId":"f03581db-4de8-40c1-faf8-0f2125eeb178"},"outputs":[{"output_type":"stream","name":"stdout","text":["The following values were not passed to `accelerate launch` and had defaults used instead:\n","\t`--num_cpu_threads_per_process` was set to `2` to improve out-of-box performance\n","To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.\n","/usr/local/lib/python3.8/dist-packages/diffusers/utils/deprecation_utils.py:35: FutureWarning: It is deprecated to pass a pretrained model name or path to `from_config`.If you were trying to load a scheduler, please use <class 'diffusers.schedulers.scheduling_ddpm.DDPMScheduler'>.from_pretrained(...) instead. Otherwise, please make sure to pass a configuration dictionary instead. This functionality will be removed in v1.0.0.\n","  warnings.warn(warning + message, FutureWarning)\n","Caching latents: 100% 50/50 [00:12<00:00,  3.86it/s]\n","Steps: 100% 2200/2200 [38:23<00:00,  1.05s/it, loss=0.228, lr=1.04e-7]\n","Fetching 15 files: 100% 15/15 [00:00<00:00, 22184.26it/s]\n","/usr/local/lib/python3.8/dist-packages/diffusers/utils/deprecation_utils.py:35: FutureWarning: The configuration file of this scheduler: DDIMScheduler {\n","  \"_class_name\": \"DDIMScheduler\",\n","  \"_diffusers_version\": \"0.9.0\",\n","  \"beta_end\": 0.012,\n","  \"beta_schedule\": \"scaled_linear\",\n","  \"beta_start\": 0.00085,\n","  \"clip_sample\": false,\n","  \"num_train_timesteps\": 1000,\n","  \"prediction_type\": \"epsilon\",\n","  \"set_alpha_to_one\": false,\n","  \"steps_offset\": 0,\n","  \"trained_betas\": null\n","}\n"," is outdated. `steps_offset` should be set to 1 instead of 0. Please make sure to update the config accordingly as leaving `steps_offset` might led to incorrect results in future versions. If you have downloaded this checkpoint from the Hugging Face Hub, it would be very nice if you could open a Pull request for the `scheduler/scheduler_config.json` file\n","  warnings.warn(warning + message, FutureWarning)\n","[*] Weights saved at /content/gdrive/MyDrive/2-4_4e_2200/2200\n","Steps: 100% 2200/2200 [38:42<00:00,  1.06s/it, loss=0.228, lr=1.04e-7]\n"]}],"source":["#@title 2-4. Run \"train_dreambooth.py\"\n","\n","!accelerate launch train_dreambooth.py \\\n","  --pretrained_model_name_or_path=$MODEL_NAME \\\n","  --output_dir=$OUTPUT_DIR \\\n","  --revision=\"fp16\" \\\n","  --with_prior_preservation --prior_loss_weight=1.0 \\\n","  --seed=1337 \\\n","  --resolution=512 \\\n","  --train_batch_size=1 \\\n","  --train_text_encoder \\\n","  --mixed_precision=\"fp16\" \\\n","  --use_8bit_adam \\\n","  --gradient_accumulation_steps=1 \\\n","  --learning_rate=1e-6 \\\n","  --lr_scheduler=\"polynomial\" \\\n","  --lr_warmup_steps=0 \\\n","  --num_class_images=50 \\\n","  --max_train_steps=2200 \\\n","  --concepts_list=\"concepts_list.json\" \\\n","  --gradient_checkpointing\n","\n","# --gradient_checkpointing=True, # set this to True to lower the memory usage.\n","# --pretrained_vae_name_or_path=\"stabilityai/sd-vae-ft-mse\" \\\n","# --learning_rate = [1e-6, 2e-6]\n","# --lr_scheduler = [polynomial, constant, linear, cosine, consine with restarts, constant with warmup]\n","# --save_interval=1500 \\\n","# --save_sample_prompt=\"photo of fhrh logo on the wall\" \\\n","# --sample_batch_size=1 \\\n","\n","\n","# Reduce the `--save_interval` to lower than `--max_train_steps` to save weights from intermediate steps.\n","# `--save_sample_prompt` can be same as `--instance_prompt` to generate intermediate samples (saved along with weights in samples directory)."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":11,"status":"ok","timestamp":1671428764984,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"89Az5NUxOWdy","outputId":"a9cf2415-7288-43bc-f587-135aca549710"},"outputs":[{"output_type":"stream","name":"stdout","text":["[*] WEIGHTS_DIR=/content/gdrive/MyDrive/2-4_4e_2200/2200\n"]}],"source":["#@title 2-5. Weights dir 설정 (비워둘 것)\n","\n","#@markdown Specify the weights directory to use (leave blank for latest)\n","#@markdown \n","#@markdown => 비워둘 것. 작성 시 Directory 꼬임\n","WEIGHTS_DIR = \"\" #@param {type:\"string\"}\n","if WEIGHTS_DIR == \"\":\n","    from natsort import natsorted\n","    from glob import glob\n","    import os\n","    WEIGHTS_DIR = natsorted(glob(OUTPUT_DIR + os.sep + \"*\"))[-1]\n","print(f\"[*] WEIGHTS_DIR={WEIGHTS_DIR}\")"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"IcpBqfQK671I"},"outputs":[],"source":["#@markdown (optional_error) Run to generate a grid of preview images from the last saved weights.\n","#@markdown \n","#@markdown 필수사항은 아니므로, 생략 (오류발생함)\n","import os\n","import matplotlib.pyplot as plt\n","import matplotlib.image as mpimg\n","\n","weights_folder = OUTPUT_DIR\n","folders = sorted([f for f in os.listdir(weights_folder) if f != \"0\"], key=lambda x: int(x))\n","\n","row = len(folders)\n","col = len(os.listdir(os.path.join(weights_folder, folders[0], \"samples\")))\n","scale = 4\n","fig, axes = plt.subplots(row, col, figsize=(col*scale, row*scale), gridspec_kw={'hspace': 0, 'wspace': 0})\n","\n","for i, folder in enumerate(folders):\n","    folder_path = os.path.join(weights_folder, folder)\n","    image_folder = os.path.join(folder_path, \"samples\")\n","    images = [f for f in os.listdir(image_folder)]\n","    for j, image in enumerate(images):\n","        if row == 1:\n","            currAxes = axes[j]\n","        else:\n","            currAxes = axes[i, j]\n","        if i == 0:\n","            currAxes.set_title(f\"Image {j}\")\n","        if j == 0:\n","            currAxes.text(-0.1, 0.5, folder, rotation=0, va='center', ha='center', transform=currAxes.transAxes)\n","        image_path = os.path.join(image_folder, image)\n","        img = mpimg.imread(image_path)\n","        currAxes.imshow(img, cmap='gray')\n","        currAxes.axis('off')\n","        \n","plt.tight_layout()\n","plt.savefig('grid.png', dpi=72)"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":15390,"status":"ok","timestamp":1671428796693,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"dcXzsUyG1aCy","outputId":"dda31249-ce3d-43a9-d843-0f37081ccd90"},"outputs":[{"output_type":"stream","name":"stdout","text":["Reshaping encoder.mid.attn_1.q.weight for SD format\n","Reshaping encoder.mid.attn_1.k.weight for SD format\n","Reshaping encoder.mid.attn_1.v.weight for SD format\n","Reshaping encoder.mid.attn_1.proj_out.weight for SD format\n","Reshaping decoder.mid.attn_1.q.weight for SD format\n","Reshaping decoder.mid.attn_1.k.weight for SD format\n","Reshaping decoder.mid.attn_1.v.weight for SD format\n","Reshaping decoder.mid.attn_1.proj_out.weight for SD format\n","[*] Converted ckpt saved at /content/gdrive/MyDrive/2-4_4e_2200/2200/model.ckpt\n"]}],"source":["#@title 2-6. Run conversion\n","\n","ckpt_path = WEIGHTS_DIR + \"/model.ckpt\"\n","\n","\n","half_arg = \"\"\n","#@markdown  Whether to convert to fp16, takes half the space (2GB).\n","fp16 = True #@param {type: \"boolean\"}\n","if fp16:\n","    half_arg = \"--half\"\n","!python convert_diffusers_to_original_stable_diffusion.py --model_path $WEIGHTS_DIR  --checkpoint_path $ckpt_path $half_arg\n","print(f\"[*] Converted ckpt saved at {ckpt_path}\")"]},{"cell_type":"markdown","metadata":{"id":"5V8wgU0HN-Kq"},"source":["## 3. [Inference with webui] Convert weights to ckpt to use in web UIs like AUTOMATIC1111."]},{"cell_type":"markdown","metadata":{"id":"dWnwshH93UW8"},"source":["==================== Trained model Save ======================\n","*   Opt 1. fast_stable_diffusion_AUTOMATIC1111_221211 코드 통해 Webui 실행 후 Test => Opt 1. 실행 할 것!\n","*   Opt 2. 이어서 아래 코드 통해 Test (Sampler 등 params 조정 한정) "]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3767,"status":"ok","timestamp":1671428888294,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"FQ0Eao1B03Qz","outputId":"6ebc02b0-21d7-41c8-ce7c-54fd61554f20"},"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/gdrive; to attempt to forcibly remount, call drive.mount(\"/content/gdrive\", force_remount=True).\n"]}],"source":["#@title gdrive 연결\n","\n","from google.colab import drive\n","drive.mount('/content/gdrive')"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":6568,"status":"ok","timestamp":1671428894852,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"r7G2-Fp5zdid","outputId":"f726fab6-7683-4efe-ca7b-771674f0aada"},"outputs":[{"output_type":"stream","name":"stdout","text":["\u001b[1;32mDONE !\n"]}],"source":["#@markdown # Install AUTOMATIC1111 repo\n","from IPython.utils import capture\n","from IPython.display import clear_output\n","from subprocess import getoutput\n","from google.colab import runtime\n","from IPython.display import display_markdown\n","import time\n","\n","\n","with capture.capture_output() as cap:\n","  fgitclone = \"git clone --depth 1\" \n","  %cd /content/gdrive/MyDrive/\n","  %mkdir  sd\n","  %cd sd\n","  !$fgitclone https://github.com/Stability-AI/stablediffusion\n","  !$fgitclone https://github.com/AUTOMATIC1111/stable-diffusion-webui\n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/\n","  !mkdir -p cache/{huggingface,torch}\n","  %cd /content/\n","  !ln -s /content/gdrive/MyDrive/sd/stable-diffusion-webui/cache/huggingface ../root/.cache/\n","  !ln -s /content/gdrive/MyDrive/sd/stable-diffusion-webui/cache/torch ../root/.cache/\n","  !pip install -q -U gdown\n","\n","Update_repo = True\n","if Update_repo:  \n","  !rm /content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.sh  \n","  !rm /content/gdrive/MyDrive/sd/stable-diffusion-webui/modules/paths.py\n","  !rm /content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py \n","  !rm /content/gdrive/MyDrive/sd/stable-diffusion-webui/modules/ui.py\n","  !rm /content/gdrive/MyDrive/sd/stable-diffusion-webui/style.css\n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/\n","  clear_output()\n","  print('\u001b[1;32m')\n","  !git pull\n","  clear_output()\n","  print('\u001b[1;32mDONE !')"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":50551,"status":"ok","timestamp":1671428945390,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"r7ISozk3zm3o","outputId":"ea4bf48b-ab62-4802-93cc-beff16bea6f2"},"outputs":[{"output_type":"stream","name":"stdout","text":["\u001b[1;32mDone!\n"]}],"source":["#@markdown # Requirements\n","\n","import os\n","import time\n","from IPython.utils import capture\n","from IPython.display import clear_output\n","from re import search\n","\n","with capture.capture_output() as cap:\n","  \n","  if not os.path.exists('/content/gdrive/MyDrive/sd/stablediffusion/src/k-diffusion/k_diffusion'):\n","    !mkdir /content/gdrive/MyDrive/sd/stablediffusion/src\n","    %cd /content/gdrive/MyDrive/sd/stablediffusion/src\n","    !$fgitclone https://github.com/CompVis/taming-transformers\n","    !$fgitclone https://github.com/openai/CLIP\n","    !$fgitclone https://github.com/salesforce/BLIP\n","    !$fgitclone https://github.com/sczhou/CodeFormer\n","    !$fgitclone https://github.com/crowsonkb/k-diffusion\n","    !mv /content/gdrive/MyDrive/sd/stablediffusion/src/CLIP /content/gdrive/MyDrive/sd/stablediffusion/src/clip\n","    !mv  /content/gdrive/MyDrive/sd/stablediffusion/src/BLIP /content/gdrive/MyDrive/sd/stablediffusion/src/blip    \n","    !mv  /content/gdrive/MyDrive/sd/stablediffusion/src/CodeFormer /content/gdrive/MyDrive/sd/stablediffusion/src/codeformer        \n","    !cp -r /content/gdrive/MyDrive/sd/stablediffusion/src/k-diffusion/k_diffusion /content/gdrive/MyDrive/sd/stable-diffusion-webui/\n","\n","\n","  %cd /content/\n","  for i in range(1,6):\n","      !wget -q \"https://github.com/TheLastBen/fast-stable-diffusion/raw/main/Dependencies/Dependencies.{i}\"\n","      !mv \"Dependencies.{i}\" \"Dependencies.7z.00{i}\"\n","  !7z x -y Dependencies.7z.001\n","  time.sleep(2)\n","  !cp -r /content/usr/local/lib/python3.8/dist-packages /usr/local/lib/python3.8/\n","  !rm -r /content/usr\n","  for i in range(1,6):\n","      !rm \"Dependencies.7z.00{i}\"\n","  !pip install -U -q pillow\n","        \n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/modules\n","  !wget -O paths.py https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/AUTOMATIC1111_files/paths.py\n","\n","  if os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/deforum-for-automatic1111-webui/scripts/deforum_helpers/src/infer.py'):\n","    %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/deforum-for-automatic1111-webui/scripts/deforum_helpers\n","    !wget -O animation.py https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/AUTOMATIC1111_files/deforum/animation.py\n","    !wget -O depth.py https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/AUTOMATIC1111_files/deforum/depth.py    \n","    %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/deforum-for-automatic1111-webui/scripts/deforum_helpers/src    \n","    !wget -O infer.py https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/AUTOMATIC1111_files/deforum/infer.py\n","\n","  if not os.path.exists('/content/gdrive/MyDrive/sd/stablediffusion/repositories/BoostingMonocularDepth'):\n","    %cd /content/gdrive/MyDrive/sd/stablediffusion\n","    !mkdir repositories\n","    %cd repositories\n","    !git clone https://github.com/isl-org/MiDaS.git midas\n","    !git clone https://github.com/compphoto/BoostingMonocularDepth.git\n","  %cd /content\n","\n","base = '/content/gdrive/MyDrive/sd/stable-diffusion'\n","dirs = [base, f'{base}/src/taming-transformers', f'{base}/src/clip',\n","        f'{base}/src/GFPGAN', f'{base}/src/blip', f'{base}/src/codeformer',\n","        f'{base}/src/realesrgan', f'{base}/src/k-diffusion', f'{base}/src/ldm']\n","for d in dirs:\n","    !rm -rf {d + '/.git'}\n","clear_output()\n","print('\u001b[1;32mDone!')"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1493,"status":"ok","timestamp":1671428948179,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"},"user_tz":-540},"id":"RAt4YJFzzrYg","outputId":"20572c2b-e0d9-4f1c-b4d8-89fa50c50e71"},"outputs":[{"output_type":"stream","name":"stdout","text":["\u001b[1;32mUsing the trained model.\n"]}],"source":["import os\n","from IPython.display import clear_output\n","import time\n","\n","#@markdown # Model Download/Load\n","Model_Version = \"1.5\" #@param [ \"1.5\", \"V2.1-512px\", \"V2.1-768px\"]\n","\n","RunwayML_Inpainting_Model = False #@param {type:\"boolean\"}\n","\n","token = \"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\" #@param {type:\"string\"}\n","\n","Redownload_the_original_model = False #@param {type:\"boolean\"}\n","\n","if Redownload_the_original_model:\n","  if os.path.exists('/content/mainmodel.ckpt'):\n","    !rm /content/mainmodel.ckpt\n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion  \n","  !wget -q -O model.ckpt https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/precompiled/attention.py\n","  !mv /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/trashfile.f  \n","  time.sleep(2)\n","  !rm /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/trashfile.f\n","  time.sleep(2)\n","  clear_output()\n","\n","#@markdown Or\n","Path_to_CKPT = \"/content/gdrive/MyDrive/2-4_4e_2200/2200/model.ckpt\" #@param {type:\"string\"}\n","#@markdown - Insert the full path of your trained model (eg: /content/gdrive/MyDrive/zarathustra.ckpt) or to a folder containing multiple models.\n","\n","#@markdown Or\n","Link_CKPT = \"\" #@param {type:\"string\"}\n","#@markdown - A direct link to a CKPT or a shared gdrive link.\n","\n","def newmdl(token):\n","\n","    if not os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'):\n","      if token==\"\":\n","        token=input(\"Insert your huggingface token :\")\n","      %cd /content/\n","      clear_output()\n","      !git init\n","      !git lfs install --system --skip-repo\n","      !$fgitclone --branch fp16 \"https://USER:{token}@huggingface.co/runwayml/stable-diffusion-v1-5\"\n","      if os.path.exists('/content/stable-diffusion-v1-5'):\n","        !$fgitclone \"https://USER:{token}@huggingface.co/stabilityai/sd-vae-ft-mse\"\n","        !rm -r /content/stable-diffusion-v1-5/vae\n","        !mv /content/sd-vae-ft-mse /content/stable-diffusion-v1-5/vae        \n","        !wget -O convertosd.py https://github.com/TheLastBen/fast-stable-diffusion/raw/main/Dreambooth/convertosd.py\n","        !sed -i '201s@.*@    model_path = \"/content/stable-diffusion-v1-5\"@' /content/convertosd.py\n","        !sed -i '202s@.*@    checkpoint_path= \"/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt\"@' /content/convertosd.py\n","        clear_output()       \n","        !python /content/convertosd.py \n","        if os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'):\n","          model='/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'\n","          clear_output()\n","          print('\u001b[1;32mDONE !')\n","        else:\n","          print('\u001b[1;31mSomething went wrong, try again')\n","      else:\n","        print('\u001b[1;31mMake sure you accept the terms at https://huggingface.co/runwayml/stable-diffusion-v1-5')\n","\n","    else:\n","      model='/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'\n","      clear_output()\n","      print('\u001b[1;32mModel already exists, check the box \"Redownload_the_original_model\" to redownload/download the V1.5')\n","\n","    if os.path.exists('/content/.git'):\n","      !rm -r /content/.git\n","\n","    if os.path.exists('/content/stable-diffusion-v1-5'):\n","      !rm -r /content/stable-diffusion-v1-5      \n","\n","\n","def V2(token):\n","\n","    if not os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'):\n","      %cd /content/\n","      clear_output()\n","      !mkdir \"/content/stable-diffusion-V2\"\n","      %cd \"/content/stable-diffusion-V2\"\n","      !git init\n","      !git lfs install --system --skip-repo\n","      if Model_Version == \"V2.1-768px\":\n","        !git remote add -f origin  \"https://USER:{token}@huggingface.co/stabilityai/stable-diffusion-2-1\"\n","      elif Model_Version == \"V2.1-512px\":\n","        !git remote add -f origin  \"https://USER:{token}@huggingface.co/stabilityai/stable-diffusion-2-1-base\" \n","      !git config core.sparsecheckout true\n","      !echo -e \"scheduler\\ntext_encoder\\ntokenizer\\nunet\\nvae\\nmodel_index.json\" > .git/info/sparse-checkout\n","      !git pull origin main\n","      %cd /content\n","      !wget -O convertosdv2.py https://github.com/TheLastBen/fast-stable-diffusion/raw/main/Dreambooth/convertosdv2.py\n","      clear_output()\n","      !python /content/convertosdv2.py --fp16 /content/stable-diffusion-V2 /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt\n","      if os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'):\n","        model='/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'\n","        clear_output()\n","        print('\u001b[1;32mDONE !')\n","      else:\n","        print('\u001b[1;31mSomething went wrong, try again')\n","\n","    else:\n","      model='/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'\n","      clear_output()\n","      print('\u001b[1;32mModel already exists, check the box \"Redownload_the_original_model\" to redownload/download the V2.')\n","\n","    if os.path.exists('/content/.git'):\n","      !rm -r /content/.git\n","      !rm -r /content/convertosdv2.py\n","    if os.path.exists('/content/stable-diffusion-V2'):\n","      !rm -r /content/stable-diffusion-V2\n","\n","def inpmdl(token):\n","\n","    if not os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/sd-v1-5-inpainting.ckpt'):\n","      if token==\"\":\n","        token=input(\"Insert your huggingface token :\")\n","      %cd /content/\n","      clear_output()\n","      !git init\n","      !git lfs install --system --skip-repo\n","      !$fgitclone --branch fp16 \"https://USER:{token}@huggingface.co/runwayml/stable-diffusion-inpainting\"\n","      if os.path.exists('/content/stable-diffusion-inpainting'):\n","        !$fgitclone \"https://USER:{token}@huggingface.co/stabilityai/sd-vae-ft-mse\"\n","        !rm -r /content/stable-diffusion-inpainting/vae\n","        !mv /content/sd-vae-ft-mse /content/stable-diffusion-inpainting/vae        \n","        !wget -O convertosd.py https://github.com/TheLastBen/fast-stable-diffusion/raw/main/Dreambooth/convertosd.py\n","        !sed -i '201s@.*@    model_path = \"/content/stable-diffusion-inpainting\"@' /content/convertosd.py\n","        !sed -i '202s@.*@    checkpoint_path= \"/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/sd-v1-5-inpainting.ckpt\"@' /content/convertosd.py\n","        clear_output()       \n","        !python /content/convertosd.py \n","        if os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/sd-v1-5-inpainting.ckpt'):\n","          clear_output()\n","          print('\u001b[1;32mDONE !')\n","        else:\n","          print('\u001b[1;31mSomething went wrong, try again')\n","      else:\n","        print('\u001b[1;31mMake sure you have accepted the terms at https://huggingface.co/runwayml/stable-diffusion-inpainting')\n","\n","    else:\n","      clear_output()\n","      print('\u001b[1;32mModel already exists.')\n","\n","    if os.path.exists('/content/.git'):\n","      !rm -r /content/.git\n","\n","    if os.path.exists('/content/stable-diffusion-inpainting'):\n","      !rm -r /content/stable-diffusion-inpainting   \n","\n","\n","if (Path_to_CKPT !=''):\n","  if os.path.exists(str(Path_to_CKPT)):\n","    print('\u001b[1;32mUsing the trained model.')\n","  else:\n","      while not os.path.exists(str(Path_to_CKPT)):\n","        print('\u001b[1;31mWrong path, use the colab file explorer to copy the path : ')\n","        Path_to_CKPT=input()\n","      if os.path.exists(str(Path_to_CKPT)):\n","        print('\u001b[1;32mUsing the trained model.')\n","\n","  model=Path_to_CKPT\n","\n","elif Link_CKPT != \"\":\n","  if os.path.exists('/content/mainmodel.ckpt'):\n","    !rm /content/mainmodel.ckpt\n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion\n","  !wget -q -O model.ckpt https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/precompiled/attention.py\n","  !mv /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/trashfile.f  \n","  time.sleep(2)\n","  !rm /content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/trashfile.f\n","  time.sleep(2)\n","  clear_output()\n","  !gdown --fuzzy -O model.ckpt $Link_CKPT\n","  if os.path.exists('/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'):\n","    if os.path.getsize(\"/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt\") > 1810671599:\n","      model='/content/gdrive/MyDrive/sd/stable-diffusion-webui/models/Stable-diffusion/model.ckpt'\n","      clear_output()\n","      print('\u001b[1;32mModel downloaded, using the trained model.')\n","    else:\n","      print('\u001b[1;31mWrong link, check that the link is valid')\n","  else:\n","    print('\u001b[1;31mWrong link, check that the link is valid')\n","\n","\n","elif Model_Version==\"1.5\":\n","  newmdl(token)\n","\n","elif Model_Version==\"V2.1-512px\" or Model_Version==\"V2.1-768px\":\n","  V2(token)\n","\n","if RunwayML_Inpainting_Model:\n","  inpmdl(token)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"FGBiE7N-zwX3","outputId":"067e75f2-5a22-4e3c-ddac-4d099e69a52d","executionInfo":{"status":"ok","timestamp":1671435360852,"user_tz":-540,"elapsed":6380775,"user":{"displayName":"youngsoo namgoong","userId":"17785000410821729031"}}},"outputs":[{"output_type":"stream","name":"stdout","text":["LatentDiffusion: Running in eps-prediction mode\n","DiffusionWrapper has 859.52 M params.\n","Downloading100% 961k/961k [00:01<00:00, 875kB/s]\n","Downloading100% 525k/525k [00:00<00:00, 572kB/s]\n","Downloading100% 389/389 [00:00<00:00, 307kB/s]\n","Downloading100% 905/905 [00:00<00:00, 699kB/s]\n","Downloading100% 4.52k/4.52k [00:00<00:00, 3.15MB/s]\n","Downloading100% 1.71G/1.71G [00:17<00:00, 97.1MB/s]\n","Loading weights [116801b9] from /content/gdrive/MyDrive/2-4_4e_2200/2200/model.ckpt\n","Applying xformers cross attention optimization.\n","Model loaded.\n","Loaded a total of 0 textual inversion embeddings.\n","Embeddings: \n","Running on local URL:  https://fuzzy-cougars-cough-130-211-240-233.loca.lt:443\n","\u001b[32mConnected\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:03<03:10,  3.90s/it]\n","  6% 3/50 [00:04<00:46,  1.01it/s]\n","  8% 4/50 [00:04<00:30,  1.52it/s]\n"," 10% 5/50 [00:04<00:21,  2.12it/s]\n"," 12% 6/50 [00:04<00:15,  2.76it/s]\n"," 14% 7/50 [00:04<00:12,  3.43it/s]\n"," 16% 8/50 [00:04<00:10,  4.08it/s]\n"," 18% 9/50 [00:05<00:08,  4.66it/s]\n"," 20% 10/50 [00:05<00:07,  5.15it/s]\n"," 22% 11/50 [00:05<00:07,  5.57it/s]\n"," 24% 12/50 [00:05<00:06,  5.90it/s]\n"," 26% 13/50 [00:05<00:06,  6.13it/s]\n"," 28% 14/50 [00:05<00:05,  6.28it/s]\n"," 30% 15/50 [00:05<00:05,  6.44it/s]\n"," 32% 16/50 [00:06<00:05,  6.52it/s]\n"," 34% 17/50 [00:06<00:05,  6.56it/s]\n"," 36% 18/50 [00:06<00:04,  6.60it/s]\n"," 38% 19/50 [00:06<00:04,  6.68it/s]\n"," 40% 20/50 [00:06<00:04,  6.68it/s]\n"," 42% 21/50 [00:06<00:04,  6.70it/s]\n"," 44% 22/50 [00:06<00:04,  6.75it/s]\n"," 46% 23/50 [00:07<00:03,  6.76it/s]\n"," 48% 24/50 [00:07<00:03,  6.73it/s]\n"," 50% 25/50 [00:07<00:03,  6.74it/s]\n"," 52% 26/50 [00:07<00:03,  6.74it/s]\n"," 54% 27/50 [00:07<00:03,  6.73it/s]\n"," 56% 28/50 [00:07<00:03,  6.74it/s]\n"," 58% 29/50 [00:08<00:03,  6.76it/s]\n"," 60% 30/50 [00:08<00:02,  6.75it/s]\n"," 62% 31/50 [00:08<00:02,  6.73it/s]\n"," 64% 32/50 [00:08<00:02,  6.74it/s]\n"," 66% 33/50 [00:08<00:02,  6.75it/s]\n"," 68% 34/50 [00:08<00:02,  6.72it/s]\n"," 70% 35/50 [00:08<00:02,  6.75it/s]\n"," 72% 36/50 [00:09<00:02,  6.76it/s]\n"," 74% 37/50 [00:09<00:01,  6.77it/s]\n"," 76% 38/50 [00:09<00:01,  6.75it/s]\n"," 78% 39/50 [00:09<00:01,  6.75it/s]\n"," 80% 40/50 [00:09<00:01,  6.75it/s]\n"," 82% 41/50 [00:09<00:01,  6.75it/s]\n"," 84% 42/50 [00:09<00:01,  6.75it/s]\n"," 86% 43/50 [00:10<00:01,  6.75it/s]\n"," 88% 44/50 [00:10<00:00,  6.75it/s]\n"," 90% 45/50 [00:10<00:00,  6.74it/s]\n"," 92% 46/50 [00:10<00:00,  6.73it/s]\n"," 94% 47/50 [00:10<00:00,  6.72it/s]\n"," 96% 48/50 [00:10<00:00,  6.71it/s]\n"," 98% 49/50 [00:11<00:00,  6.72it/s]\n","100% 50/50 [00:11<00:00,  4.48it/s]\n","Total progress100% 50/50 [00:11<00:00,  4.36it/s]\n","Warning: unknown mime-type for \"outputs/txt2img-images\" -- using \"application/octet-stream\"\n","Error: no \"view\" mailcap rules found for type \"application/octet-stream\"\n","/usr/bin/xdg-open: 851: /usr/bin/xdg-open: www-browser: not found\n","/usr/bin/xdg-open: 851: /usr/bin/xdg-open: links2: not found\n","/usr/bin/xdg-open: 851: /usr/bin/xdg-open: elinks: not found\n","/usr/bin/xdg-open: 851: /usr/bin/xdg-open: links: not found\n","/usr/bin/xdg-open: 851: /usr/bin/xdg-open: lynx: not found\n","/usr/bin/xdg-open: 851: /usr/bin/xdg-open: w3m: not found\n","xdg-open: no method available for opening 'outputs/txt2img-images'\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:09,  4.90it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:07,  6.13it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  6.37it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:06,  6.49it/s]\n","DDIM Sampler 12% 6/50 [00:00<00:06,  6.58it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:06,  6.66it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.69it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.72it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:05,  6.72it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:05,  6.73it/s]\n","DDIM Sampler 24% 12/50 [00:01<00:05,  6.74it/s]\n","DDIM Sampler 26% 13/50 [00:01<00:05,  6.76it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.79it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.77it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.75it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:04,  6.74it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:04,  6.77it/s]\n","DDIM Sampler 38% 19/50 [00:02<00:04,  6.71it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.75it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.74it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.72it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.75it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:03,  6.77it/s]\n","DDIM Sampler 50% 25/50 [00:03<00:03,  6.78it/s]\n","DDIM Sampler 52% 26/50 [00:03<00:03,  6.71it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.76it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.77it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.74it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:02,  6.74it/s]\n","DDIM Sampler 62% 31/50 [00:04<00:02,  6.73it/s]\n","DDIM Sampler 64% 32/50 [00:04<00:02,  6.71it/s]\n","DDIM Sampler 66% 33/50 [00:04<00:02,  6.72it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.73it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.72it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.73it/s]\n","DDIM Sampler 74% 37/50 [00:05<00:01,  6.72it/s]\n","DDIM Sampler 76% 38/50 [00:05<00:01,  6.73it/s]\n","DDIM Sampler 78% 39/50 [00:05<00:01,  6.69it/s]\n","DDIM Sampler 80% 40/50 [00:05<00:01,  6.71it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.72it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.72it/s]\n","DDIM Sampler 86% 43/50 [00:06<00:01,  6.72it/s]\n","DDIM Sampler 88% 44/50 [00:06<00:00,  6.71it/s]\n","DDIM Sampler 90% 45/50 [00:06<00:00,  6.72it/s]\n","DDIM Sampler 92% 46/50 [00:06<00:00,  6.72it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.73it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.71it/s]\n","DDIM Sampler 98% 49/50 [00:07<00:00,  6.71it/s]\n","DDIM Sampler100% 50/50 [00:07<00:00,  6.68it/s]\n","Total progress100% 50/50 [00:07<00:00,  6.34it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.52it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.77it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.28it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.62it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.83it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.98it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:06,  6.08it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.12it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.17it/s]\n","PLMS Sampler 22% 11/50 [00:01<00:06,  6.22it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.24it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:05,  6.26it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.25it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.25it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.25it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.26it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.25it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:04,  6.23it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.22it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  6.24it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  6.26it/s]\n","PLMS Sampler 46% 23/50 [00:03<00:04,  6.22it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  6.23it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  6.23it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:03,  6.23it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  6.22it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  6.23it/s]\n","PLMS Sampler 58% 29/50 [00:04<00:03,  6.19it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  6.21it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  6.20it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:02,  6.20it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  6.20it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  6.22it/s]\n","PLMS Sampler 70% 35/50 [00:05<00:02,  6.22it/s]\n","PLMS Sampler 72% 36/50 [00:05<00:02,  6.25it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  6.21it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:01,  6.20it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  6.23it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  6.22it/s]\n","PLMS Sampler 82% 41/50 [00:06<00:01,  6.21it/s]\n","PLMS Sampler 84% 42/50 [00:06<00:01,  6.20it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  6.18it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:00,  6.17it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  6.16it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  6.15it/s]\n","PLMS Sampler 94% 47/50 [00:07<00:00,  6.15it/s]\n","PLMS Sampler 96% 48/50 [00:07<00:00,  6.17it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  6.16it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  6.06it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.89it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.53it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.74it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.28it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.62it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.80it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.92it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:06,  6.02it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.10it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.18it/s]\n","PLMS Sampler 22% 11/50 [00:01<00:06,  6.22it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.23it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:05,  6.23it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.22it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.22it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.23it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.27it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.22it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:04,  6.24it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.24it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  6.23it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  6.20it/s]\n","PLMS Sampler 46% 23/50 [00:03<00:04,  6.20it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  6.17it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  6.17it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:03,  6.15it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  6.18it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  6.18it/s]\n","PLMS Sampler 58% 29/50 [00:04<00:03,  6.19it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  6.19it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  6.20it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:02,  6.18it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  6.19it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  6.21it/s]\n","PLMS Sampler 70% 35/50 [00:05<00:02,  6.26it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  6.23it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  6.18it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:01,  6.19it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  6.19it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  6.18it/s]\n","PLMS Sampler 82% 41/50 [00:06<00:01,  6.19it/s]\n","PLMS Sampler 84% 42/50 [00:06<00:01,  6.16it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  6.11it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:00,  6.14it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  6.14it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  6.18it/s]\n","PLMS Sampler 94% 47/50 [00:07<00:00,  6.19it/s]\n","PLMS Sampler 96% 48/50 [00:07<00:00,  6.15it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  6.14it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  6.03it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.86it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:11,  4.23it/s]\n","  6% 3/50 [00:00<00:08,  5.76it/s]\n","  8% 4/50 [00:00<00:07,  5.94it/s]\n"," 10% 5/50 [00:00<00:07,  6.09it/s]\n"," 12% 6/50 [00:01<00:07,  6.19it/s]\n"," 14% 7/50 [00:01<00:06,  6.18it/s]\n"," 16% 8/50 [00:01<00:06,  6.18it/s]\n"," 18% 9/50 [00:01<00:06,  6.22it/s]\n"," 20% 10/50 [00:01<00:06,  6.22it/s]\n"," 22% 11/50 [00:01<00:06,  6.26it/s]\n"," 24% 12/50 [00:01<00:06,  6.28it/s]\n"," 26% 13/50 [00:02<00:05,  6.29it/s]\n"," 28% 14/50 [00:02<00:05,  6.28it/s]\n"," 30% 15/50 [00:02<00:05,  6.25it/s]\n"," 32% 16/50 [00:02<00:05,  6.24it/s]\n"," 34% 17/50 [00:02<00:05,  6.21it/s]\n"," 36% 18/50 [00:02<00:05,  6.20it/s]\n"," 38% 19/50 [00:03<00:05,  6.18it/s]\n"," 40% 20/50 [00:03<00:04,  6.17it/s]\n"," 42% 21/50 [00:03<00:04,  6.16it/s]\n"," 44% 22/50 [00:03<00:04,  6.13it/s]\n"," 46% 23/50 [00:03<00:04,  6.16it/s]\n"," 48% 24/50 [00:03<00:04,  6.15it/s]\n"," 50% 25/50 [00:04<00:04,  6.16it/s]\n"," 52% 26/50 [00:04<00:03,  6.16it/s]\n"," 54% 27/50 [00:04<00:03,  6.16it/s]\n"," 56% 28/50 [00:04<00:03,  6.17it/s]\n"," 58% 29/50 [00:04<00:03,  6.17it/s]\n"," 60% 30/50 [00:04<00:03,  6.17it/s]\n"," 62% 31/50 [00:05<00:03,  6.16it/s]\n"," 64% 32/50 [00:05<00:02,  6.16it/s]\n"," 66% 33/50 [00:05<00:02,  6.15it/s]\n"," 68% 34/50 [00:05<00:02,  6.15it/s]\n"," 70% 35/50 [00:05<00:02,  6.14it/s]\n"," 72% 36/50 [00:05<00:02,  6.14it/s]\n"," 74% 37/50 [00:06<00:02,  6.16it/s]\n"," 76% 38/50 [00:06<00:01,  6.14it/s]\n"," 78% 39/50 [00:06<00:01,  6.13it/s]\n"," 80% 40/50 [00:06<00:01,  6.16it/s]\n"," 82% 41/50 [00:06<00:01,  6.15it/s]\n"," 84% 42/50 [00:06<00:01,  6.14it/s]\n"," 86% 43/50 [00:07<00:01,  6.16it/s]\n"," 88% 44/50 [00:07<00:00,  6.16it/s]\n"," 90% 45/50 [00:07<00:00,  6.14it/s]\n"," 92% 46/50 [00:07<00:00,  6.15it/s]\n"," 94% 47/50 [00:07<00:00,  6.16it/s]\n"," 96% 48/50 [00:07<00:00,  6.14it/s]\n"," 98% 49/50 [00:07<00:00,  6.18it/s]\n","100% 50/50 [00:08<00:00,  6.14it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.85it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.21it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.63it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.87it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  6.01it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.11it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  6.12it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.15it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.16it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.16it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.20it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  6.17it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.15it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.13it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.12it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.16it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.16it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:05,  6.16it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.15it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.13it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.10it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.14it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.16it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:04,  6.11it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.15it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.13it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.12it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.12it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.14it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.13it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.17it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.13it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.32it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.22it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.19it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.17it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  6.16it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:01,  6.16it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.18it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.17it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.15it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.17it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  6.15it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:00,  6.14it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  6.14it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.12it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.12it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.13it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  6.19it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  6.11it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.83it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.55it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.73it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.23it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.52it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.72it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.84it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.93it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.03it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.05it/s]\n","PLMS Sampler 22% 11/50 [00:02<00:06,  6.04it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.10it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:06,  6.14it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.12it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.14it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.14it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.14it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.16it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:05,  6.19it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.17it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  6.13it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  6.13it/s]\n","PLMS Sampler 46% 23/50 [00:03<00:04,  6.15it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  6.14it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  6.17it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:03,  6.16it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  6.15it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  6.17it/s]\n","PLMS Sampler 58% 29/50 [00:04<00:03,  6.17it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  6.10it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  6.15it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:02,  6.17it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  6.17it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  6.18it/s]\n","PLMS Sampler 70% 35/50 [00:05<00:02,  6.16it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  6.09it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  6.10it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:01,  6.13it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  6.12it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  6.11it/s]\n","PLMS Sampler 82% 41/50 [00:06<00:01,  6.10it/s]\n","PLMS Sampler 84% 42/50 [00:07<00:01,  6.02it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  6.06it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:00,  6.08it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  6.13it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  6.11it/s]\n","PLMS Sampler 94% 47/50 [00:07<00:00,  6.15it/s]\n","PLMS Sampler 96% 48/50 [00:08<00:00,  6.08it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  6.09it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  5.97it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.80it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.53it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:10,  4.70it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.22it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.52it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.71it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.86it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.96it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.04it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.11it/s]\n","PLMS Sampler 22% 11/50 [00:02<00:06,  6.14it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.19it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:05,  6.19it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.19it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.17it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.17it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.17it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.15it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:05,  6.15it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.15it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:05,  5.79it/s]\n","Total progress 42% 21/50 [00:03<00:05,  5.43it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:10,  4.54it/s]\n","  6% 3/50 [00:00<00:08,  5.76it/s]\n","  8% 4/50 [00:00<00:07,  5.93it/s]\n"," 10% 5/50 [00:00<00:07,  6.01it/s]\n"," 12% 6/50 [00:01<00:07,  6.08it/s]\n"," 14% 7/50 [00:01<00:07,  6.07it/s]\n"," 16% 8/50 [00:01<00:06,  6.10it/s]\n"," 18% 9/50 [00:01<00:06,  6.12it/s]\n"," 20% 10/50 [00:01<00:06,  6.13it/s]\n"," 22% 11/50 [00:01<00:06,  6.14it/s]\n"," 24% 12/50 [00:02<00:06,  6.14it/s]\n"," 26% 13/50 [00:02<00:06,  6.12it/s]\n"," 28% 14/50 [00:02<00:05,  6.12it/s]\n"," 30% 15/50 [00:02<00:05,  6.16it/s]\n"," 32% 16/50 [00:02<00:05,  6.16it/s]\n"," 34% 17/50 [00:02<00:05,  6.15it/s]\n"," 36% 18/50 [00:02<00:05,  6.13it/s]\n"," 38% 19/50 [00:03<00:05,  6.14it/s]\n"," 40% 20/50 [00:03<00:04,  6.16it/s]\n"," 42% 21/50 [00:03<00:04,  6.14it/s]\n"," 44% 22/50 [00:03<00:04,  6.15it/s]\n"," 46% 23/50 [00:03<00:04,  6.14it/s]\n"," 48% 24/50 [00:03<00:04,  6.14it/s]\n"," 50% 25/50 [00:04<00:04,  6.16it/s]\n"," 52% 26/50 [00:04<00:03,  6.17it/s]\n"," 54% 27/50 [00:04<00:03,  6.18it/s]\n"," 56% 28/50 [00:04<00:03,  6.15it/s]\n"," 58% 29/50 [00:04<00:03,  6.16it/s]\n"," 60% 30/50 [00:04<00:03,  6.16it/s]\n"," 62% 31/50 [00:05<00:03,  6.16it/s]\n"," 64% 32/50 [00:05<00:02,  6.19it/s]\n"," 66% 33/50 [00:05<00:02,  6.14it/s]\n"," 68% 34/50 [00:05<00:02,  6.15it/s]\n"," 70% 35/50 [00:05<00:02,  6.15it/s]\n"," 72% 36/50 [00:05<00:02,  6.15it/s]\n"," 74% 37/50 [00:06<00:02,  6.16it/s]\n"," 76% 38/50 [00:06<00:01,  6.14it/s]\n"," 78% 39/50 [00:06<00:01,  6.12it/s]\n"," 80% 40/50 [00:06<00:01,  6.14it/s]\n"," 82% 41/50 [00:06<00:01,  6.15it/s]\n"," 84% 42/50 [00:06<00:01,  6.14it/s]\n"," 86% 43/50 [00:07<00:01,  6.10it/s]\n"," 88% 44/50 [00:07<00:00,  6.11it/s]\n"," 90% 45/50 [00:07<00:00,  6.05it/s]\n"," 92% 46/50 [00:07<00:00,  6.04it/s]\n"," 94% 47/50 [00:07<00:00,  6.06it/s]\n"," 96% 48/50 [00:07<00:00,  6.07it/s]\n"," 98% 49/50 [00:08<00:00,  6.08it/s]\n","100% 50/50 [00:08<00:00,  6.10it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.81it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:10,  4.83it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.75it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.99it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  6.07it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.13it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:06,  6.16it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.15it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.15it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.15it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.14it/s]\n","DDIM Sampler 24% 12/50 [00:01<00:06,  6.16it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:05,  6.18it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.18it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.18it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.16it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.16it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:05,  6.17it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.18it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.18it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.18it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.17it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.16it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:04,  6.13it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.16it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.16it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.17it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.17it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.15it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.11it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.12it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.14it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.14it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.16it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.16it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.14it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  6.13it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:01,  6.14it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.16it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.15it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.14it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.07it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  6.09it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:00,  6.11it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  6.15it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.26it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.17it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.09it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  6.07it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  6.12it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.81it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.53it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.74it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.28it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.60it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.80it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.93it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:06,  6.02it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.10it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.16it/s]\n","PLMS Sampler 22% 11/50 [00:01<00:06,  6.17it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.23it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:05,  6.22it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.20it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.21it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.19it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.18it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.18it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:04,  6.20it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.22it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  6.25it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  6.24it/s]\n","PLMS Sampler 46% 23/50 [00:03<00:04,  6.24it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  6.23it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  6.18it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:03,  6.21it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  6.20it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  6.20it/s]\n","PLMS Sampler 58% 29/50 [00:04<00:03,  6.18it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  6.16it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  6.13it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:02,  6.16it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  6.17it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  6.16it/s]\n","PLMS Sampler 70% 35/50 [00:05<00:02,  6.15it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  6.14it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  6.11it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:01,  6.09it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  6.14it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  6.15it/s]\n","PLMS Sampler 82% 41/50 [00:06<00:01,  6.18it/s]\n","PLMS Sampler 84% 42/50 [00:07<00:01,  6.16it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  6.14it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:00,  6.10it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  6.11it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  6.13it/s]\n","PLMS Sampler 94% 47/50 [00:07<00:00,  6.14it/s]\n","PLMS Sampler 96% 48/50 [00:07<00:00,  6.15it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  6.11it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  6.01it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.87it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:18,  2.60it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.80it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.28it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.62it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.82it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.87it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.98it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.08it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.16it/s]\n","PLMS Sampler 22% 11/50 [00:01<00:07,  5.55it/s]\n","Total progress 22% 11/50 [00:02<00:07,  4.92it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:10,  4.57it/s]\n","  6% 3/50 [00:00<00:08,  5.80it/s]\n","  8% 4/50 [00:00<00:07,  5.98it/s]\n"," 10% 5/50 [00:00<00:07,  6.09it/s]\n"," 12% 6/50 [00:01<00:07,  6.17it/s]\n"," 14% 7/50 [00:01<00:06,  6.16it/s]\n"," 16% 8/50 [00:01<00:06,  6.20it/s]\n"," 18% 9/50 [00:01<00:06,  6.20it/s]\n"," 20% 10/50 [00:01<00:06,  6.20it/s]\n"," 22% 11/50 [00:01<00:06,  6.21it/s]\n"," 24% 12/50 [00:01<00:06,  6.24it/s]\n"," 26% 13/50 [00:02<00:05,  6.18it/s]\n"," 28% 14/50 [00:02<00:05,  6.15it/s]\n"," 30% 15/50 [00:02<00:05,  6.17it/s]\n"," 32% 16/50 [00:02<00:05,  6.16it/s]\n"," 34% 17/50 [00:02<00:05,  6.19it/s]\n"," 36% 18/50 [00:02<00:05,  6.20it/s]\n"," 38% 19/50 [00:03<00:05,  6.20it/s]\n"," 40% 20/50 [00:03<00:04,  6.19it/s]\n"," 42% 21/50 [00:03<00:04,  6.20it/s]\n"," 44% 22/50 [00:03<00:04,  6.20it/s]\n"," 46% 23/50 [00:03<00:04,  6.21it/s]\n"," 48% 24/50 [00:03<00:04,  6.21it/s]\n"," 50% 25/50 [00:04<00:04,  6.19it/s]\n"," 52% 26/50 [00:04<00:03,  6.17it/s]\n"," 54% 27/50 [00:04<00:03,  6.15it/s]\n"," 56% 28/50 [00:04<00:03,  6.16it/s]\n"," 58% 29/50 [00:04<00:03,  6.15it/s]\n"," 60% 30/50 [00:04<00:03,  6.15it/s]\n"," 62% 31/50 [00:05<00:03,  6.15it/s]\n"," 64% 32/50 [00:05<00:02,  6.14it/s]\n"," 66% 33/50 [00:05<00:02,  6.12it/s]\n"," 68% 34/50 [00:05<00:02,  6.12it/s]\n"," 70% 35/50 [00:05<00:02,  6.13it/s]\n"," 72% 36/50 [00:05<00:02,  6.15it/s]\n"," 74% 37/50 [00:06<00:02,  6.15it/s]\n"," 76% 38/50 [00:06<00:01,  6.17it/s]\n"," 78% 39/50 [00:06<00:01,  6.12it/s]\n"," 80% 40/50 [00:06<00:01,  6.14it/s]\n"," 82% 41/50 [00:06<00:01,  6.15it/s]\n"," 84% 42/50 [00:06<00:01,  6.12it/s]\n"," 86% 43/50 [00:07<00:01,  6.17it/s]\n"," 88% 44/50 [00:07<00:00,  6.15it/s]\n"," 90% 45/50 [00:07<00:00,  6.13it/s]\n"," 92% 46/50 [00:07<00:00,  6.15it/s]\n"," 94% 47/50 [00:07<00:00,  6.15it/s]\n"," 96% 48/50 [00:07<00:00,  6.17it/s]\n"," 98% 49/50 [00:07<00:00,  6.14it/s]\n","100% 50/50 [00:08<00:00,  6.13it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.84it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.20it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.54it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.78it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  5.94it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.05it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  6.06it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.09it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.10it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.11it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.12it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  6.13it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.13it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.13it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.16it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.14it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.17it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:05,  6.18it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.16it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.14it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.14it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.13it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.13it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:04,  6.11it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.11it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.11it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.11it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.11it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.15it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.12it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.13it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.13it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.23it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.18it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.14it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.12it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  6.11it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:01,  6.11it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.13it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.16it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.14it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.14it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  6.14it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:00,  6.15it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  6.14it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.16it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.16it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.16it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  6.14it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  6.09it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.82it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:18,  2.67it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.77it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.28it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.58it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.71it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.82it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.94it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  5.99it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.05it/s]\n","PLMS Sampler 22% 11/50 [00:01<00:06,  6.07it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.04it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:06,  6.04it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.07it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.11it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.10it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.13it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.14it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:05,  6.14it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.13it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  6.17it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  6.15it/s]\n","PLMS Sampler 46% 23/50 [00:03<00:04,  6.16it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  6.14it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  6.14it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:03,  6.12it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  6.17it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  6.14it/s]\n","PLMS Sampler 58% 29/50 [00:04<00:03,  6.16it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  6.17it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  6.17it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:02,  6.15it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  6.16it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  6.15it/s]\n","PLMS Sampler 70% 35/50 [00:05<00:02,  6.15it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  6.17it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  6.16it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:01,  6.16it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  6.14it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  6.12it/s]\n","PLMS Sampler 82% 41/50 [00:06<00:01,  6.12it/s]\n","PLMS Sampler 84% 42/50 [00:07<00:01,  6.07it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  6.07it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:00,  6.06it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  6.01it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  6.08it/s]\n","PLMS Sampler 94% 47/50 [00:07<00:00,  6.09it/s]\n","PLMS Sampler 96% 48/50 [00:08<00:00,  6.10it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  6.09it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  5.97it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.79it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:11,  4.43it/s]\n","  6% 3/50 [00:00<00:08,  5.69it/s]\n","  8% 4/50 [00:00<00:07,  5.87it/s]\n"," 10% 5/50 [00:00<00:07,  5.98it/s]\n"," 12% 6/50 [00:01<00:07,  6.02it/s]\n"," 14% 7/50 [00:01<00:07,  5.97it/s]\n"," 16% 8/50 [00:01<00:06,  6.06it/s]\n"," 18% 9/50 [00:01<00:06,  6.11it/s]\n"," 20% 10/50 [00:01<00:06,  6.12it/s]\n"," 22% 11/50 [00:01<00:06,  6.14it/s]\n"," 24% 12/50 [00:02<00:06,  6.13it/s]\n"," 26% 13/50 [00:02<00:06,  6.12it/s]\n"," 28% 14/50 [00:02<00:05,  6.13it/s]\n"," 30% 15/50 [00:02<00:05,  6.14it/s]\n"," 32% 16/50 [00:02<00:05,  6.16it/s]\n"," 34% 17/50 [00:02<00:05,  6.18it/s]\n"," 36% 18/50 [00:02<00:05,  6.13it/s]\n"," 38% 19/50 [00:03<00:05,  6.13it/s]\n"," 40% 20/50 [00:03<00:04,  6.15it/s]\n"," 42% 21/50 [00:03<00:04,  6.16it/s]\n"," 44% 22/50 [00:03<00:04,  6.15it/s]\n"," 46% 23/50 [00:03<00:04,  6.16it/s]\n"," 48% 24/50 [00:03<00:04,  6.15it/s]\n"," 50% 25/50 [00:04<00:04,  6.15it/s]\n"," 52% 26/50 [00:04<00:03,  6.15it/s]\n"," 54% 27/50 [00:04<00:03,  6.12it/s]\n"," 56% 28/50 [00:04<00:03,  6.12it/s]\n"," 58% 29/50 [00:04<00:03,  6.09it/s]\n"," 60% 30/50 [00:04<00:03,  6.08it/s]\n"," 62% 31/50 [00:05<00:03,  6.07it/s]\n"," 64% 32/50 [00:05<00:02,  6.05it/s]\n"," 66% 33/50 [00:05<00:02,  6.06it/s]\n"," 68% 34/50 [00:05<00:02,  6.07it/s]\n"," 70% 35/50 [00:05<00:02,  6.09it/s]\n"," 72% 36/50 [00:05<00:02,  6.08it/s]\n"," 74% 37/50 [00:06<00:02,  6.07it/s]\n"," 76% 38/50 [00:06<00:01,  6.03it/s]\n"," 78% 39/50 [00:06<00:01,  6.01it/s]\n"," 80% 40/50 [00:06<00:01,  6.03it/s]\n"," 82% 41/50 [00:06<00:01,  6.08it/s]\n"," 84% 42/50 [00:06<00:01,  6.07it/s]\n"," 86% 43/50 [00:07<00:01,  6.09it/s]\n"," 88% 44/50 [00:07<00:00,  6.07it/s]\n"," 90% 45/50 [00:07<00:00,  6.05it/s]\n"," 92% 46/50 [00:07<00:00,  6.01it/s]\n"," 94% 47/50 [00:07<00:00,  6.03it/s]\n"," 96% 48/50 [00:07<00:00,  6.05it/s]\n"," 98% 49/50 [00:08<00:00,  6.08it/s]\n","100% 50/50 [00:08<00:00,  6.06it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.76it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.28it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.57it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.76it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  5.88it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  5.93it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  5.90it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:07,  5.98it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.05it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.09it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.08it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  6.11it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.06it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.04it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  5.99it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.07it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.09it/s]\n","DDIM Sampler 36% 18/50 [00:03<00:05,  6.10it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.09it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.08it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.03it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.01it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.04it/s]\n","DDIM Sampler 48% 24/50 [00:04<00:04,  6.04it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.05it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.06it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.01it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  5.96it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.02it/s]\n","DDIM Sampler 60% 30/50 [00:05<00:03,  6.04it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.06it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.05it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.01it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  5.95it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.01it/s]\n","DDIM Sampler 72% 36/50 [00:06<00:02,  6.04it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  6.01it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:02,  5.98it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.00it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  5.98it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  5.95it/s]\n","DDIM Sampler 84% 42/50 [00:07<00:01,  5.95it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  5.99it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:00,  6.01it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  6.01it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.00it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  5.97it/s]\n","DDIM Sampler 96% 48/50 [00:08<00:00,  5.99it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  5.95it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  5.98it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.69it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:18,  2.62it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.72it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.20it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.50it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.64it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.73it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.80it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  5.88it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  5.97it/s]\n","PLMS Sampler 22% 11/50 [00:02<00:06,  6.03it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.01it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:06,  5.96it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:06,  5.96it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  5.97it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.03it/s]\n","PLMS Sampler 34% 17/50 [00:03<00:05,  6.06it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.02it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:05,  5.99it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:05,  5.98it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  5.99it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  5.97it/s]\n","PLMS Sampler 46% 23/50 [00:04<00:04,  5.96it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  5.98it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  6.00it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:04,  5.99it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  5.97it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  5.96it/s]\n","PLMS Sampler 58% 29/50 [00:05<00:03,  6.00it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  5.98it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  5.95it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:03,  5.93it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  5.96it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  5.94it/s]\n","PLMS Sampler 70% 35/50 [00:06<00:02,  5.94it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  5.96it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  5.93it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:02,  5.91it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  5.92it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  5.91it/s]\n","PLMS Sampler 82% 41/50 [00:07<00:01,  5.90it/s]\n","PLMS Sampler 84% 42/50 [00:07<00:01,  5.95it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  5.91it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:01,  5.87it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  5.91it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  5.93it/s]\n","PLMS Sampler 94% 47/50 [00:08<00:00,  5.90it/s]\n","PLMS Sampler 96% 48/50 [00:08<00:00,  5.91it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  5.88it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  5.83it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.64it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:11,  4.30it/s]\n","  6% 3/50 [00:00<00:08,  5.71it/s]\n","  8% 4/50 [00:00<00:07,  5.92it/s]\n"," 10% 5/50 [00:00<00:07,  6.01it/s]\n"," 12% 6/50 [00:01<00:07,  6.11it/s]\n"," 14% 7/50 [00:01<00:07,  6.05it/s]\n"," 16% 8/50 [00:01<00:06,  6.09it/s]\n"," 18% 9/50 [00:01<00:06,  6.11it/s]\n"," 20% 10/50 [00:01<00:06,  6.14it/s]\n"," 22% 11/50 [00:01<00:06,  6.14it/s]\n"," 24% 12/50 [00:02<00:06,  6.16it/s]\n"," 26% 13/50 [00:02<00:06,  6.09it/s]\n"," 28% 14/50 [00:02<00:05,  6.15it/s]\n"," 30% 15/50 [00:02<00:05,  6.14it/s]\n"," 32% 16/50 [00:02<00:05,  6.18it/s]\n"," 34% 17/50 [00:02<00:05,  6.16it/s]\n"," 36% 18/50 [00:02<00:05,  6.15it/s]\n"," 38% 19/50 [00:03<00:05,  6.13it/s]\n"," 40% 20/50 [00:03<00:04,  6.14it/s]\n"," 42% 21/50 [00:03<00:04,  6.15it/s]\n"," 44% 22/50 [00:03<00:04,  6.16it/s]\n"," 46% 23/50 [00:03<00:04,  6.18it/s]\n"," 48% 24/50 [00:03<00:04,  6.18it/s]\n"," 50% 25/50 [00:04<00:04,  6.10it/s]\n"," 52% 26/50 [00:04<00:03,  6.10it/s]\n"," 54% 27/50 [00:04<00:03,  6.13it/s]\n"," 56% 28/50 [00:04<00:03,  6.16it/s]\n"," 58% 29/50 [00:04<00:03,  6.20it/s]\n"," 60% 30/50 [00:04<00:03,  6.21it/s]\n"," 62% 31/50 [00:05<00:03,  6.17it/s]\n"," 64% 32/50 [00:05<00:02,  6.18it/s]\n"," 66% 33/50 [00:05<00:02,  6.18it/s]\n"," 68% 34/50 [00:05<00:02,  6.17it/s]\n"," 70% 35/50 [00:05<00:02,  6.14it/s]\n"," 72% 36/50 [00:05<00:02,  6.16it/s]\n"," 74% 37/50 [00:06<00:02,  6.15it/s]\n"," 76% 38/50 [00:06<00:01,  6.14it/s]\n"," 78% 39/50 [00:06<00:01,  6.14it/s]\n"," 80% 40/50 [00:06<00:01,  6.16it/s]\n"," 82% 41/50 [00:06<00:01,  6.10it/s]\n"," 84% 42/50 [00:06<00:01,  6.14it/s]\n"," 86% 43/50 [00:07<00:01,  6.18it/s]\n"," 88% 44/50 [00:07<00:00,  6.17it/s]\n"," 90% 45/50 [00:07<00:00,  6.15it/s]\n"," 92% 46/50 [00:07<00:00,  6.16it/s]\n"," 94% 47/50 [00:07<00:00,  6.13it/s]\n"," 96% 48/50 [00:07<00:00,  6.13it/s]\n"," 98% 49/50 [00:08<00:00,  6.14it/s]\n","100% 50/50 [00:08<00:00,  6.11it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.81it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.43it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.71it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.91it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  5.99it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.05it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  6.04it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.07it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.11it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.14it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.12it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  6.16it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.11it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.11it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.11it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.10it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.09it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:05,  6.08it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.06it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.06it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.06it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.09it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.11it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:04,  6.10it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.12it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.08it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.07it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.04it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.04it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.07it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.09it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.09it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.07it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.05it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.00it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.00it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  6.03it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:01,  6.03it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.01it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.00it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.00it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  5.99it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  6.00it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:01,  5.96it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  5.99it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.03it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.04it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.01it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  6.01it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  6.02it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.72it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.55it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:10,  4.68it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.18it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.48it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.57it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.65it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.77it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  5.87it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  5.91it/s]\n","PLMS Sampler 22% 11/50 [00:02<00:06,  5.93it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  5.92it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:06,  5.89it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:06,  5.90it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  5.96it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.00it/s]\n","PLMS Sampler 34% 17/50 [00:03<00:05,  6.05it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.02it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:05,  5.93it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:05,  5.93it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  5.96it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  5.95it/s]\n","PLMS Sampler 46% 23/50 [00:04<00:04,  5.90it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  5.95it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  5.90it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:04,  5.88it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  5.89it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  5.88it/s]\n","PLMS Sampler 58% 29/50 [00:05<00:03,  5.87it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  5.88it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  5.89it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:03,  5.89it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  5.91it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  5.88it/s]\n","PLMS Sampler 70% 35/50 [00:06<00:02,  5.84it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  5.86it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  5.89it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:02,  5.87it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  5.87it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  5.86it/s]\n","PLMS Sampler 82% 41/50 [00:07<00:01,  5.81it/s]\n","PLMS Sampler 84% 42/50 [00:07<00:01,  5.86it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  5.87it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:01,  5.88it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  5.86it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  5.85it/s]\n","PLMS Sampler 94% 47/50 [00:08<00:00,  5.80it/s]\n","PLMS Sampler 96% 48/50 [00:08<00:00,  5.82it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  5.85it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  5.76it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.59it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:11,  4.25it/s]\n","  6% 3/50 [00:00<00:08,  5.60it/s]\n","  8% 4/50 [00:00<00:07,  5.79it/s]\n"," 10% 5/50 [00:00<00:07,  5.94it/s]\n"," 12% 6/50 [00:01<00:07,  6.00it/s]\n"," 14% 7/50 [00:01<00:07,  5.98it/s]\n"," 16% 8/50 [00:01<00:07,  6.00it/s]\n"," 18% 9/50 [00:01<00:06,  6.00it/s]\n"," 20% 10/50 [00:01<00:06,  6.04it/s]\n"," 22% 11/50 [00:01<00:06,  6.03it/s]\n"," 24% 12/50 [00:02<00:06,  6.03it/s]\n"," 26% 13/50 [00:02<00:06,  6.06it/s]\n"," 28% 14/50 [00:02<00:05,  6.08it/s]\n"," 30% 15/50 [00:02<00:05,  6.07it/s]\n"," 32% 16/50 [00:02<00:05,  6.08it/s]\n"," 34% 17/50 [00:02<00:05,  6.06it/s]\n"," 36% 18/50 [00:03<00:05,  6.03it/s]\n"," 38% 19/50 [00:03<00:05,  6.02it/s]\n"," 40% 20/50 [00:03<00:04,  6.02it/s]\n"," 42% 21/50 [00:03<00:04,  6.02it/s]\n"," 44% 22/50 [00:03<00:04,  6.02it/s]\n"," 46% 23/50 [00:03<00:04,  6.01it/s]\n"," 48% 24/50 [00:04<00:04,  6.00it/s]\n"," 50% 25/50 [00:04<00:04,  6.01it/s]\n"," 52% 26/50 [00:04<00:03,  6.05it/s]\n"," 54% 27/50 [00:04<00:03,  6.06it/s]\n"," 56% 28/50 [00:04<00:03,  6.07it/s]\n"," 58% 29/50 [00:04<00:03,  6.03it/s]\n"," 60% 30/50 [00:05<00:03,  6.00it/s]\n"," 62% 31/50 [00:05<00:03,  6.01it/s]\n"," 64% 32/50 [00:05<00:02,  6.04it/s]\n"," 66% 33/50 [00:05<00:02,  6.03it/s]\n"," 68% 34/50 [00:05<00:02,  5.99it/s]\n"," 70% 35/50 [00:05<00:02,  5.96it/s]\n"," 72% 36/50 [00:06<00:02,  5.99it/s]\n"," 74% 37/50 [00:06<00:02,  5.99it/s]\n"," 76% 38/50 [00:06<00:02,  5.97it/s]\n"," 78% 39/50 [00:06<00:01,  5.96it/s]\n"," 80% 40/50 [00:06<00:01,  5.98it/s]\n"," 82% 41/50 [00:06<00:01,  5.97it/s]\n"," 84% 42/50 [00:07<00:01,  5.95it/s]\n"," 86% 43/50 [00:07<00:01,  5.95it/s]\n"," 88% 44/50 [00:07<00:01,  5.95it/s]\n"," 90% 45/50 [00:07<00:00,  5.95it/s]\n"," 92% 46/50 [00:07<00:00,  5.94it/s]\n"," 94% 47/50 [00:07<00:00,  5.96it/s]\n"," 96% 48/50 [00:08<00:00,  5.97it/s]\n"," 98% 49/50 [00:08<00:00,  5.96it/s]\n","100% 50/50 [00:08<00:00,  5.97it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.69it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.39it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.71it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.92it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  6.06it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.15it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  6.09it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.14it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.19it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.20it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.20it/s]\n","DDIM Sampler 24% 12/50 [00:01<00:06,  6.18it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.14it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.14it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.11it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.13it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.17it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:05,  6.18it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.16it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.14it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.14it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.15it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.16it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:04,  6.17it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.17it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.12it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.13it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.15it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.15it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.17it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.18it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.15it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.17it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.17it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.17it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.16it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  6.16it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:01,  6.15it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.17it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.16it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.15it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.13it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  6.14it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:00,  6.16it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  6.17it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.17it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.16it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.14it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  6.13it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  6.12it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.83it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.30it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.66it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.86it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  5.98it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.02it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  5.97it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:07,  5.97it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.02it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.05it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.03it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  6.00it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.03it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.03it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.04it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.02it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.02it/s]\n","DDIM Sampler 36% 18/50 [00:03<00:05,  6.01it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.02it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.03it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.03it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.02it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.00it/s]\n","DDIM Sampler 48% 24/50 [00:04<00:04,  6.01it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.02it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.02it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.01it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.00it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  5.98it/s]\n","DDIM Sampler 60% 30/50 [00:05<00:03,  5.98it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.04it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.03it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.00it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  5.96it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.01it/s]\n","DDIM Sampler 72% 36/50 [00:06<00:02,  5.97it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  5.97it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:02,  5.98it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  5.98it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  5.95it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  5.94it/s]\n","DDIM Sampler 84% 42/50 [00:07<00:01,  5.88it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  5.97it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:01,  5.93it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  5.91it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  5.90it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  5.91it/s]\n","DDIM Sampler 96% 48/50 [00:08<00:00,  5.83it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  5.93it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  5.95it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.67it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:10,  4.54it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.67it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.82it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  5.90it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  5.90it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  5.81it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:07,  5.81it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  5.87it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  5.92it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  5.89it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  5.94it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  5.87it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:06,  5.85it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  5.88it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  5.89it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  5.84it/s]\n","DDIM Sampler 36% 18/50 [00:03<00:05,  5.90it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  5.85it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:05,  5.82it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  5.83it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  5.83it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  5.81it/s]\n","DDIM Sampler 48% 24/50 [00:04<00:04,  5.83it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  5.82it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:04,  5.79it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  5.80it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  5.83it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  5.86it/s]\n","DDIM Sampler 60% 30/50 [00:05<00:03,  5.81it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  5.83it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:03,  5.80it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  5.79it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  5.79it/s]\n","DDIM Sampler 70% 35/50 [00:06<00:02,  5.85it/s]\n","DDIM Sampler 72% 36/50 [00:06<00:02,  5.78it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  5.84it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:02,  5.80it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  5.81it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  5.77it/s]\n","DDIM Sampler 82% 41/50 [00:07<00:01,  5.84it/s]\n","DDIM Sampler 84% 42/50 [00:07<00:01,  5.78it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  5.84it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:01,  5.80it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  5.81it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  5.78it/s]\n","DDIM Sampler 94% 47/50 [00:08<00:00,  5.81it/s]\n","DDIM Sampler 96% 48/50 [00:08<00:00,  5.75it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  5.77it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  5.81it/s]\n","Total progress100% 50/50 [00:09<00:00,  5.52it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.20it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.45it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:08,  5.65it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  5.74it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  5.82it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  5.67it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:07,  5.74it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:07,  5.78it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  5.88it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  5.90it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  5.91it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  5.82it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:06,  5.86it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:06,  5.83it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  5.87it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  5.87it/s]\n","DDIM Sampler 36% 18/50 [00:03<00:05,  5.90it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  5.87it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:05,  5.87it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  5.88it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  5.89it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  5.88it/s]\n","DDIM Sampler 48% 24/50 [00:04<00:04,  5.94it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  5.94it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:04,  5.90it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  5.91it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  5.89it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  5.91it/s]\n","DDIM Sampler 60% 30/50 [00:05<00:03,  5.94it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  5.90it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:03,  5.88it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  5.93it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  5.89it/s]\n","DDIM Sampler 70% 35/50 [00:06<00:02,  5.90it/s]\n","DDIM Sampler 72% 36/50 [00:06<00:02,  5.94it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  5.90it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:02,  5.89it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  5.89it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  5.87it/s]\n","DDIM Sampler 82% 41/50 [00:07<00:01,  5.87it/s]\n","DDIM Sampler 84% 42/50 [00:07<00:01,  5.90it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  5.88it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:01,  5.89it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  5.89it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  5.87it/s]\n","DDIM Sampler 94% 47/50 [00:08<00:00,  5.90it/s]\n","DDIM Sampler 96% 48/50 [00:08<00:00,  5.93it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  5.91it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  5.85it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.57it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:10,  4.69it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.82it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.96it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  6.04it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.03it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  6.03it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.09it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.13it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.15it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.15it/s]\n","DDIM Sampler 24% 12/50 [00:01<00:06,  6.16it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.12it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.14it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.14it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.17it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.17it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:05,  6.16it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.14it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.13it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.13it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.15it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.17it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:04,  6.18it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.19it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.14it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.14it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.13it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.13it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.11it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  6.10it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.05it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.03it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.05it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.08it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.12it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  6.13it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:01,  6.10it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.09it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.06it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.03it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.03it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  6.06it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:00,  6.08it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  6.09it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.12it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.08it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.02it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  6.02it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  6.08it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.77it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.53it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:10,  4.62it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:09,  5.06it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.42it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.61it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.67it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.74it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:07,  5.83it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  5.87it/s]\n","PLMS Sampler 22% 11/50 [00:02<00:06,  5.92it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  5.93it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:06,  5.95it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:06,  5.93it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  5.91it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  5.98it/s]\n","PLMS Sampler 34% 17/50 [00:03<00:05,  6.00it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.01it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:05,  5.95it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:05,  5.92it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  5.93it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  5.94it/s]\n","PLMS Sampler 46% 23/50 [00:04<00:04,  6.03it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  5.92it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  5.92it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:04,  5.89it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  5.90it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  5.91it/s]\n","PLMS Sampler 58% 29/50 [00:05<00:03,  5.92it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  5.89it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  5.84it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:03,  5.85it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  5.89it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  5.88it/s]\n","PLMS Sampler 70% 35/50 [00:06<00:02,  5.90it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  5.97it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  5.85it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:02,  5.82it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  5.81it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  5.84it/s]\n","PLMS Sampler 82% 41/50 [00:07<00:01,  5.85it/s]\n","PLMS Sampler 84% 42/50 [00:07<00:01,  5.86it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  5.86it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:01,  5.82it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  5.81it/s]\n","PLMS Sampler 92% 46/50 [00:08<00:00,  5.81it/s]\n","PLMS Sampler 94% 47/50 [00:08<00:00,  5.81it/s]\n","PLMS Sampler 96% 48/50 [00:08<00:00,  5.81it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  5.81it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  5.75it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.58it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:19,  2.45it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:10,  4.56it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:09,  5.06it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.38it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.54it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.65it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:08,  5.08it/s]\n","Total progress 16% 8/50 [00:01<00:09,  4.38it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:10,  4.48it/s]\n","  6% 3/50 [00:00<00:08,  5.63it/s]\n","  8% 4/50 [00:00<00:07,  5.80it/s]\n"," 10% 5/50 [00:00<00:07,  5.88it/s]\n"," 12% 6/50 [00:01<00:07,  5.91it/s]\n"," 14% 7/50 [00:01<00:07,  5.76it/s]\n"," 16% 8/50 [00:01<00:07,  5.81it/s]\n"," 18% 9/50 [00:01<00:06,  5.86it/s]\n"," 20% 10/50 [00:01<00:06,  5.92it/s]\n"," 22% 11/50 [00:01<00:06,  5.93it/s]\n"," 24% 12/50 [00:02<00:06,  5.92it/s]\n"," 26% 13/50 [00:02<00:06,  5.86it/s]\n"," 28% 14/50 [00:02<00:06,  5.87it/s]\n"," 30% 15/50 [00:02<00:05,  5.87it/s]\n"," 32% 16/50 [00:02<00:05,  5.89it/s]\n"," 34% 17/50 [00:02<00:05,  5.98it/s]\n"," 36% 18/50 [00:03<00:05,  5.90it/s]\n"," 38% 19/50 [00:03<00:05,  5.86it/s]\n"," 40% 20/50 [00:03<00:05,  5.84it/s]\n"," 42% 21/50 [00:03<00:04,  5.86it/s]\n"," 44% 22/50 [00:03<00:04,  5.85it/s]\n"," 46% 23/50 [00:03<00:04,  5.88it/s]\n"," 48% 24/50 [00:04<00:04,  5.84it/s]\n"," 50% 25/50 [00:04<00:04,  5.81it/s]\n"," 52% 26/50 [00:04<00:04,  5.82it/s]\n"," 54% 27/50 [00:04<00:03,  5.81it/s]\n"," 56% 28/50 [00:04<00:03,  5.83it/s]\n"," 58% 29/50 [00:04<00:03,  5.83it/s]\n"," 60% 30/50 [00:05<00:03,  5.84it/s]\n"," 62% 31/50 [00:05<00:03,  5.81it/s]\n"," 64% 32/50 [00:05<00:03,  5.82it/s]\n"," 66% 33/50 [00:05<00:02,  5.80it/s]\n"," 68% 34/50 [00:05<00:02,  5.81it/s]\n"," 70% 35/50 [00:06<00:02,  5.81it/s]\n"," 72% 36/50 [00:06<00:02,  5.80it/s]\n"," 74% 37/50 [00:06<00:02,  5.76it/s]\n"," 76% 38/50 [00:06<00:02,  5.80it/s]\n"," 78% 39/50 [00:06<00:01,  5.79it/s]\n"," 80% 40/50 [00:06<00:01,  5.83it/s]\n"," 82% 41/50 [00:07<00:01,  5.81it/s]\n"," 84% 42/50 [00:07<00:01,  5.76it/s]\n"," 86% 43/50 [00:07<00:01,  5.74it/s]\n"," 88% 44/50 [00:07<00:01,  5.74it/s]\n"," 90% 45/50 [00:07<00:00,  5.76it/s]\n"," 92% 46/50 [00:07<00:00,  5.76it/s]\n"," 94% 47/50 [00:08<00:00,  5.76it/s]\n"," 96% 48/50 [00:08<00:00,  5.75it/s]\n"," 98% 49/50 [00:08<00:00,  5.74it/s]\n","100% 50/50 [00:08<00:00,  5.80it/s]\n","Total progress100% 50/50 [00:09<00:00,  5.51it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.33it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.64it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.83it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  5.98it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.04it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:07,  6.01it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.04it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  5.99it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.00it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.04it/s]\n","DDIM Sampler 24% 12/50 [00:02<00:06,  6.01it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:06,  6.04it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.04it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.01it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  5.99it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.02it/s]\n","DDIM Sampler 36% 18/50 [00:03<00:05,  6.02it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:05,  6.03it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.06it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  5.99it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  5.97it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  5.99it/s]\n","DDIM Sampler 48% 24/50 [00:04<00:04,  6.03it/s]\n","DDIM Sampler 50% 25/50 [00:04<00:04,  6.02it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.01it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  5.97it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  5.97it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  5.99it/s]\n","DDIM Sampler 60% 30/50 [00:05<00:03,  5.98it/s]\n","DDIM Sampler 62% 31/50 [00:05<00:03,  5.98it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.02it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  5.92it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  5.86it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  5.94it/s]\n","DDIM Sampler 72% 36/50 [00:06<00:02,  5.98it/s]\n","DDIM Sampler 74% 37/50 [00:06<00:02,  5.99it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:02,  5.99it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  5.90it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  5.91it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  5.92it/s]\n","DDIM Sampler 84% 42/50 [00:07<00:01,  5.92it/s]\n","DDIM Sampler 86% 43/50 [00:07<00:01,  5.92it/s]\n","DDIM Sampler 88% 44/50 [00:07<00:01,  5.93it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  5.88it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  5.87it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  5.87it/s]\n","DDIM Sampler 96% 48/50 [00:08<00:00,  5.90it/s]\n","DDIM Sampler 98% 49/50 [00:08<00:00,  5.91it/s]\n","DDIM Sampler100% 50/50 [00:08<00:00,  5.94it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.65it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:18,  2.69it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.78it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.23it/s]\n","PLMS Sampler 10% 5/50 [00:01<00:08,  5.47it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.58it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.68it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:07,  5.83it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  5.92it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  5.96it/s]\n","PLMS Sampler 22% 11/50 [00:02<00:06,  5.93it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  5.88it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:06,  5.87it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:06,  5.88it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  5.93it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  5.97it/s]\n","PLMS Sampler 34% 17/50 [00:03<00:05,  5.93it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  5.89it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:05,  5.90it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:05,  5.91it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  5.89it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  5.92it/s]\n","PLMS Sampler 46% 23/50 [00:04<00:04,  5.87it/s]\n","PLMS Sampler 48% 24/50 [00:04<00:04,  5.89it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:04,  5.88it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:04,  5.88it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  5.89it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  5.91it/s]\n","PLMS Sampler 58% 29/50 [00:05<00:03,  5.84it/s]\n","PLMS Sampler 60% 30/50 [00:05<00:03,  5.86it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  5.82it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:03,  5.86it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  5.85it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  5.85it/s]\n","PLMS Sampler 70% 35/50 [00:06<00:02,  5.83it/s]\n","PLMS Sampler 72% 36/50 [00:06<00:02,  5.81it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  5.81it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:02,  5.82it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  5.88it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  5.87it/s]\n","PLMS Sampler 82% 41/50 [00:07<00:01,  5.86it/s]\n","PLMS Sampler 84% 42/50 [00:07<00:01,  5.84it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  5.82it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:01,  5.82it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  5.82it/s]\n","PLMS Sampler 92% 46/50 [00:08<00:00,  5.85it/s]\n","PLMS Sampler 94% 47/50 [00:08<00:00,  5.82it/s]\n","PLMS Sampler 96% 48/50 [00:08<00:00,  5.82it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  5.81it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  5.75it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.58it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:09,  5.00it/s]\n","  6% 3/50 [00:00<00:07,  6.16it/s]\n","  8% 4/50 [00:00<00:07,  6.36it/s]\n"," 10% 5/50 [00:00<00:06,  6.48it/s]\n"," 12% 6/50 [00:00<00:06,  6.58it/s]\n"," 14% 7/50 [00:01<00:06,  6.66it/s]\n"," 16% 8/50 [00:01<00:06,  6.66it/s]\n"," 18% 9/50 [00:01<00:06,  6.69it/s]\n"," 20% 10/50 [00:01<00:05,  6.73it/s]\n"," 22% 11/50 [00:01<00:05,  6.73it/s]\n"," 24% 12/50 [00:01<00:05,  6.74it/s]\n"," 26% 13/50 [00:01<00:05,  6.76it/s]\n"," 28% 14/50 [00:02<00:05,  6.73it/s]\n"," 30% 15/50 [00:02<00:05,  6.74it/s]\n"," 32% 16/50 [00:02<00:05,  6.75it/s]\n"," 34% 17/50 [00:02<00:04,  6.72it/s]\n"," 36% 18/50 [00:02<00:04,  6.73it/s]\n"," 38% 19/50 [00:02<00:04,  6.74it/s]\n"," 40% 20/50 [00:03<00:04,  6.75it/s]\n"," 42% 21/50 [00:03<00:04,  6.73it/s]\n"," 44% 22/50 [00:03<00:04,  6.72it/s]\n"," 46% 23/50 [00:03<00:04,  6.70it/s]\n"," 48% 24/50 [00:03<00:03,  6.72it/s]\n"," 50% 25/50 [00:03<00:03,  6.70it/s]\n"," 52% 26/50 [00:03<00:03,  6.70it/s]\n"," 54% 27/50 [00:04<00:03,  6.72it/s]\n"," 56% 28/50 [00:04<00:03,  6.74it/s]\n"," 58% 29/50 [00:04<00:03,  6.72it/s]\n"," 60% 30/50 [00:04<00:02,  6.70it/s]\n"," 62% 31/50 [00:04<00:02,  6.73it/s]\n"," 64% 32/50 [00:04<00:02,  6.71it/s]\n"," 66% 33/50 [00:04<00:02,  6.72it/s]\n"," 68% 34/50 [00:05<00:02,  6.72it/s]\n"," 70% 35/50 [00:05<00:02,  6.73it/s]\n"," 72% 36/50 [00:05<00:02,  6.71it/s]\n"," 74% 37/50 [00:05<00:01,  6.73it/s]\n"," 76% 38/50 [00:05<00:01,  6.74it/s]\n"," 78% 39/50 [00:05<00:01,  6.72it/s]\n"," 80% 40/50 [00:06<00:01,  6.73it/s]\n"," 82% 41/50 [00:06<00:01,  6.72it/s]\n"," 84% 42/50 [00:06<00:01,  6.72it/s]\n"," 86% 43/50 [00:06<00:01,  6.71it/s]\n"," 88% 44/50 [00:06<00:00,  6.72it/s]\n"," 90% 45/50 [00:06<00:00,  6.72it/s]\n"," 92% 46/50 [00:06<00:00,  6.74it/s]\n"," 94% 47/50 [00:07<00:00,  6.72it/s]\n"," 96% 48/50 [00:07<00:00,  6.70it/s]\n"," 98% 49/50 [00:07<00:00,  6.71it/s]\n","100% 50/50 [00:07<00:00,  6.67it/s]\n","Total progress100% 50/50 [00:07<00:00,  6.35it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.27it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.76it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  6.11it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  6.33it/s]\n","DDIM Sampler 12% 6/50 [00:00<00:06,  6.43it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:06,  6.53it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.59it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.63it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.65it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:05,  6.63it/s]\n","DDIM Sampler 24% 12/50 [00:01<00:05,  6.69it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:05,  6.68it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.67it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.69it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.72it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:04,  6.69it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:04,  6.71it/s]\n","DDIM Sampler 38% 19/50 [00:02<00:04,  6.70it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.69it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.72it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.71it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.70it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:03,  6.71it/s]\n","DDIM Sampler 50% 25/50 [00:03<00:03,  6.71it/s]\n","DDIM Sampler 52% 26/50 [00:03<00:03,  6.69it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.68it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.64it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.67it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.66it/s]\n","DDIM Sampler 62% 31/50 [00:04<00:02,  6.65it/s]\n","DDIM Sampler 64% 32/50 [00:04<00:02,  6.65it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.66it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.62it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.57it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.59it/s]\n","DDIM Sampler 74% 37/50 [00:05<00:01,  6.57it/s]\n","DDIM Sampler 76% 38/50 [00:05<00:01,  6.59it/s]\n","DDIM Sampler 78% 39/50 [00:05<00:01,  6.58it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.61it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.62it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.62it/s]\n","DDIM Sampler 86% 43/50 [00:06<00:01,  6.62it/s]\n","DDIM Sampler 88% 44/50 [00:06<00:00,  6.61it/s]\n","DDIM Sampler 90% 45/50 [00:06<00:00,  6.61it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.62it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.65it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.65it/s]\n","DDIM Sampler 98% 49/50 [00:07<00:00,  6.70it/s]\n","DDIM Sampler100% 50/50 [00:07<00:00,  6.58it/s]\n","Total progress100% 50/50 [00:07<00:00,  6.27it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:17,  2.77it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.94it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.47it/s]\n","PLMS Sampler 10% 5/50 [00:00<00:07,  5.77it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.94it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  6.11it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:06,  6.24it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.34it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.40it/s]\n","PLMS Sampler 22% 11/50 [00:01<00:06,  6.46it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:05,  6.41it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:05,  6.41it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.42it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.39it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.40it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.44it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:04,  6.42it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:04,  6.37it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.40it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  6.42it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  6.42it/s]\n","PLMS Sampler 46% 23/50 [00:03<00:04,  6.46it/s]\n","PLMS Sampler 48% 24/50 [00:03<00:04,  6.44it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:03,  6.43it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:03,  6.43it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  6.42it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  6.38it/s]\n","PLMS Sampler 58% 29/50 [00:04<00:03,  6.42it/s]\n","PLMS Sampler 60% 30/50 [00:04<00:03,  6.43it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:02,  6.42it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:02,  6.40it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  6.42it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  6.40it/s]\n","PLMS Sampler 70% 35/50 [00:05<00:02,  6.39it/s]\n","PLMS Sampler 72% 36/50 [00:05<00:02,  6.38it/s]\n","PLMS Sampler 74% 37/50 [00:05<00:02,  6.41it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:01,  6.40it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  6.41it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  6.43it/s]\n","PLMS Sampler 82% 41/50 [00:06<00:01,  6.43it/s]\n","PLMS Sampler 84% 42/50 [00:06<00:01,  6.43it/s]\n","PLMS Sampler 86% 43/50 [00:06<00:01,  6.37it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:00,  6.38it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  6.35it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  6.37it/s]\n","PLMS Sampler 94% 47/50 [00:07<00:00,  6.39it/s]\n","PLMS Sampler 96% 48/50 [00:07<00:00,  6.38it/s]\n","PLMS Sampler 98% 49/50 [00:07<00:00,  6.36it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  6.25it/s]\n","Total progress100% 50/50 [00:08<00:00,  6.06it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:10,  4.71it/s]\n","  6% 3/50 [00:00<00:07,  5.92it/s]\n","  8% 4/50 [00:00<00:07,  6.10it/s]\n"," 10% 5/50 [00:00<00:07,  6.25it/s]\n"," 12% 6/50 [00:00<00:06,  6.30it/s]\n"," 14% 7/50 [00:01<00:06,  6.27it/s]\n"," 16% 8/50 [00:01<00:06,  6.26it/s]\n"," 18% 9/50 [00:01<00:06,  6.25it/s]\n"," 20% 10/50 [00:01<00:06,  6.29it/s]\n"," 22% 11/50 [00:01<00:06,  6.29it/s]\n"," 24% 12/50 [00:01<00:06,  6.30it/s]\n"," 26% 13/50 [00:02<00:05,  6.30it/s]\n"," 28% 14/50 [00:02<00:05,  6.24it/s]\n"," 30% 15/50 [00:02<00:05,  6.21it/s]\n"," 32% 16/50 [00:02<00:05,  6.22it/s]\n"," 34% 17/50 [00:02<00:05,  6.24it/s]\n"," 36% 18/50 [00:02<00:05,  6.26it/s]\n"," 38% 19/50 [00:03<00:04,  6.28it/s]\n"," 40% 20/50 [00:03<00:04,  6.29it/s]\n"," 42% 21/50 [00:03<00:04,  6.25it/s]\n"," 44% 22/50 [00:03<00:04,  6.24it/s]\n"," 46% 23/50 [00:03<00:04,  6.23it/s]\n"," 48% 24/50 [00:03<00:04,  6.22it/s]\n"," 50% 25/50 [00:04<00:04,  6.23it/s]\n"," 52% 26/50 [00:04<00:03,  6.23it/s]\n"," 54% 27/50 [00:04<00:03,  6.25it/s]\n"," 56% 28/50 [00:04<00:03,  6.26it/s]\n"," 58% 29/50 [00:04<00:03,  6.23it/s]\n"," 60% 30/50 [00:04<00:03,  6.21it/s]\n"," 62% 31/50 [00:04<00:03,  6.22it/s]\n"," 64% 32/50 [00:05<00:02,  6.21it/s]\n"," 66% 33/50 [00:05<00:02,  6.20it/s]\n"," 68% 34/50 [00:05<00:02,  6.19it/s]\n"," 70% 35/50 [00:05<00:02,  6.16it/s]\n"," 72% 36/50 [00:05<00:02,  6.16it/s]\n"," 74% 37/50 [00:05<00:02,  6.17it/s]\n"," 76% 38/50 [00:06<00:01,  6.18it/s]\n"," 78% 39/50 [00:06<00:01,  6.18it/s]\n"," 80% 40/50 [00:06<00:01,  6.17it/s]\n"," 82% 41/50 [00:06<00:01,  6.16it/s]\n"," 84% 42/50 [00:06<00:01,  6.15it/s]\n"," 86% 43/50 [00:06<00:01,  6.15it/s]\n"," 88% 44/50 [00:07<00:00,  6.15it/s]\n"," 90% 45/50 [00:07<00:00,  6.14it/s]\n"," 92% 46/50 [00:07<00:00,  6.12it/s]\n"," 94% 47/50 [00:07<00:00,  6.12it/s]\n"," 96% 48/50 [00:07<00:00,  6.12it/s]\n"," 98% 49/50 [00:07<00:00,  6.12it/s]\n","100% 50/50 [00:08<00:00,  6.18it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.88it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:11,  4.21it/s]\n","  6% 3/50 [00:00<00:08,  5.85it/s]\n","  8% 4/50 [00:00<00:07,  6.13it/s]\n"," 10% 5/50 [00:00<00:07,  6.32it/s]\n"," 12% 6/50 [00:00<00:06,  6.43it/s]\n"," 14% 7/50 [00:01<00:06,  6.50it/s]\n"," 16% 8/50 [00:01<00:06,  6.57it/s]\n"," 18% 9/50 [00:01<00:06,  6.60it/s]\n"," 20% 10/50 [00:01<00:06,  6.63it/s]\n"," 22% 11/50 [00:01<00:05,  6.67it/s]\n"," 24% 12/50 [00:01<00:05,  6.65it/s]\n"," 26% 13/50 [00:02<00:05,  6.66it/s]\n"," 28% 14/50 [00:02<00:05,  6.67it/s]\n"," 30% 15/50 [00:02<00:05,  6.65it/s]\n"," 32% 16/50 [00:02<00:05,  6.65it/s]\n"," 34% 17/50 [00:02<00:04,  6.61it/s]\n"," 36% 18/50 [00:02<00:04,  6.61it/s]\n"," 38% 19/50 [00:02<00:04,  6.65it/s]\n"," 40% 20/50 [00:03<00:04,  6.64it/s]\n"," 42% 21/50 [00:03<00:04,  6.64it/s]\n"," 44% 22/50 [00:03<00:04,  6.62it/s]\n"," 46% 23/50 [00:03<00:04,  6.63it/s]\n"," 48% 24/50 [00:03<00:03,  6.62it/s]\n"," 50% 25/50 [00:03<00:03,  6.63it/s]\n"," 52% 26/50 [00:03<00:03,  6.73it/s]\n"," 54% 27/50 [00:04<00:03,  6.61it/s]\n"," 56% 28/50 [00:04<00:03,  6.61it/s]\n"," 58% 29/50 [00:04<00:03,  6.55it/s]\n"," 60% 30/50 [00:04<00:03,  6.54it/s]\n"," 62% 31/50 [00:04<00:02,  6.55it/s]\n"," 64% 32/50 [00:04<00:02,  6.58it/s]\n"," 66% 33/50 [00:05<00:02,  6.59it/s]\n"," 68% 34/50 [00:05<00:02,  6.59it/s]\n"," 70% 35/50 [00:05<00:02,  6.57it/s]\n"," 72% 36/50 [00:05<00:02,  6.60it/s]\n"," 74% 37/50 [00:05<00:01,  6.56it/s]\n"," 76% 38/50 [00:05<00:01,  6.56it/s]\n"," 78% 39/50 [00:05<00:01,  6.55it/s]\n"," 80% 40/50 [00:06<00:01,  6.55it/s]\n"," 82% 41/50 [00:06<00:01,  6.56it/s]\n"," 84% 42/50 [00:06<00:01,  6.55it/s]\n"," 86% 43/50 [00:06<00:01,  6.56it/s]\n"," 88% 44/50 [00:06<00:00,  6.55it/s]\n"," 90% 45/50 [00:06<00:00,  6.57it/s]\n"," 92% 46/50 [00:07<00:00,  6.58it/s]\n"," 94% 47/50 [00:07<00:00,  6.56it/s]\n"," 96% 48/50 [00:07<00:00,  6.58it/s]\n"," 98% 49/50 [00:07<00:00,  6.59it/s]\n","100% 50/50 [00:07<00:00,  6.53it/s]\n","Total progress100% 50/50 [00:08<00:00,  6.23it/s]\n","  0% 0/50 [00:00<?, ?it/s]\n","  2% 1/50 [00:00<00:09,  4.95it/s]\n","  6% 3/50 [00:00<00:07,  6.14it/s]\n","  8% 4/50 [00:00<00:07,  6.31it/s]\n"," 10% 5/50 [00:00<00:07,  6.41it/s]\n"," 12% 6/50 [00:00<00:06,  6.47it/s]\n"," 14% 7/50 [00:01<00:06,  6.50it/s]\n"," 16% 8/50 [00:01<00:06,  6.50it/s]\n"," 18% 9/50 [00:01<00:06,  6.51it/s]\n"," 20% 10/50 [00:01<00:06,  6.50it/s]\n"," 22% 11/50 [00:01<00:05,  6.53it/s]\n"," 24% 12/50 [00:01<00:05,  6.50it/s]\n"," 26% 13/50 [00:02<00:05,  6.50it/s]\n"," 28% 14/50 [00:02<00:05,  6.52it/s]\n"," 30% 15/50 [00:02<00:05,  6.52it/s]\n"," 32% 16/50 [00:02<00:05,  6.53it/s]\n"," 34% 17/50 [00:02<00:05,  6.54it/s]\n"," 36% 18/50 [00:02<00:04,  6.53it/s]\n"," 38% 19/50 [00:02<00:04,  6.54it/s]\n"," 40% 20/50 [00:03<00:04,  6.53it/s]\n"," 42% 21/50 [00:03<00:04,  6.51it/s]\n"," 44% 22/50 [00:03<00:04,  6.51it/s]\n"," 46% 23/50 [00:03<00:04,  6.51it/s]\n"," 48% 24/50 [00:03<00:03,  6.50it/s]\n"," 50% 25/50 [00:03<00:03,  6.51it/s]\n"," 52% 26/50 [00:04<00:03,  6.47it/s]\n"," 54% 27/50 [00:04<00:03,  6.49it/s]\n"," 56% 28/50 [00:04<00:03,  6.48it/s]\n"," 58% 29/50 [00:04<00:03,  6.47it/s]\n"," 60% 30/50 [00:04<00:03,  6.47it/s]\n"," 62% 31/50 [00:04<00:02,  6.43it/s]\n"," 64% 32/50 [00:04<00:02,  6.47it/s]\n"," 66% 33/50 [00:05<00:02,  6.51it/s]\n"," 68% 34/50 [00:05<00:02,  6.49it/s]\n"," 70% 35/50 [00:05<00:02,  6.51it/s]\n"," 72% 36/50 [00:05<00:02,  6.52it/s]\n"," 74% 37/50 [00:05<00:01,  6.52it/s]\n"," 76% 38/50 [00:05<00:01,  6.51it/s]\n"," 78% 39/50 [00:06<00:01,  6.52it/s]\n"," 80% 40/50 [00:06<00:01,  6.49it/s]\n"," 82% 41/50 [00:06<00:01,  6.49it/s]\n"," 84% 42/50 [00:06<00:01,  6.50it/s]\n"," 86% 43/50 [00:06<00:01,  6.50it/s]\n"," 88% 44/50 [00:06<00:00,  6.51it/s]\n"," 90% 45/50 [00:06<00:00,  6.46it/s]\n"," 92% 46/50 [00:07<00:00,  6.45it/s]\n"," 94% 47/50 [00:07<00:00,  6.46it/s]\n"," 96% 48/50 [00:07<00:00,  6.44it/s]\n"," 98% 49/50 [00:07<00:00,  6.45it/s]\n","100% 50/50 [00:07<00:00,  6.46it/s]\n","Total progress100% 50/50 [00:08<00:00,  6.15it/s]\n","Data shape for DDIM sampling is (1, 4, 64, 64), eta 0.0\n","Running DDIM Sampling with 50 timesteps\n","DDIM Sampler  0% 0/50 [00:00<?, ?it/s]\n","DDIM Sampler  2% 1/50 [00:00<00:11,  4.22it/s]\n","DDIM Sampler  6% 3/50 [00:00<00:08,  5.72it/s]\n","DDIM Sampler  8% 4/50 [00:00<00:07,  5.99it/s]\n","DDIM Sampler 10% 5/50 [00:00<00:07,  6.19it/s]\n","DDIM Sampler 12% 6/50 [00:01<00:07,  6.24it/s]\n","DDIM Sampler 14% 7/50 [00:01<00:06,  6.33it/s]\n","DDIM Sampler 16% 8/50 [00:01<00:06,  6.36it/s]\n","DDIM Sampler 18% 9/50 [00:01<00:06,  6.36it/s]\n","DDIM Sampler 20% 10/50 [00:01<00:06,  6.40it/s]\n","DDIM Sampler 22% 11/50 [00:01<00:06,  6.44it/s]\n","DDIM Sampler 24% 12/50 [00:01<00:05,  6.48it/s]\n","DDIM Sampler 26% 13/50 [00:02<00:05,  6.49it/s]\n","DDIM Sampler 28% 14/50 [00:02<00:05,  6.47it/s]\n","DDIM Sampler 30% 15/50 [00:02<00:05,  6.46it/s]\n","DDIM Sampler 32% 16/50 [00:02<00:05,  6.44it/s]\n","DDIM Sampler 34% 17/50 [00:02<00:05,  6.42it/s]\n","DDIM Sampler 36% 18/50 [00:02<00:04,  6.45it/s]\n","DDIM Sampler 38% 19/50 [00:03<00:04,  6.45it/s]\n","DDIM Sampler 40% 20/50 [00:03<00:04,  6.45it/s]\n","DDIM Sampler 42% 21/50 [00:03<00:04,  6.45it/s]\n","DDIM Sampler 44% 22/50 [00:03<00:04,  6.41it/s]\n","DDIM Sampler 46% 23/50 [00:03<00:04,  6.37it/s]\n","DDIM Sampler 48% 24/50 [00:03<00:04,  6.40it/s]\n","DDIM Sampler 50% 25/50 [00:03<00:03,  6.43it/s]\n","DDIM Sampler 52% 26/50 [00:04<00:03,  6.44it/s]\n","DDIM Sampler 54% 27/50 [00:04<00:03,  6.46it/s]\n","DDIM Sampler 56% 28/50 [00:04<00:03,  6.44it/s]\n","DDIM Sampler 58% 29/50 [00:04<00:03,  6.43it/s]\n","DDIM Sampler 60% 30/50 [00:04<00:03,  6.44it/s]\n","DDIM Sampler 62% 31/50 [00:04<00:02,  6.35it/s]\n","DDIM Sampler 64% 32/50 [00:05<00:02,  6.36it/s]\n","DDIM Sampler 66% 33/50 [00:05<00:02,  6.38it/s]\n","DDIM Sampler 68% 34/50 [00:05<00:02,  6.40it/s]\n","DDIM Sampler 70% 35/50 [00:05<00:02,  6.36it/s]\n","DDIM Sampler 72% 36/50 [00:05<00:02,  6.37it/s]\n","DDIM Sampler 74% 37/50 [00:05<00:02,  6.38it/s]\n","DDIM Sampler 76% 38/50 [00:06<00:01,  6.36it/s]\n","DDIM Sampler 78% 39/50 [00:06<00:01,  6.37it/s]\n","DDIM Sampler 80% 40/50 [00:06<00:01,  6.39it/s]\n","DDIM Sampler 82% 41/50 [00:06<00:01,  6.40it/s]\n","DDIM Sampler 84% 42/50 [00:06<00:01,  6.37it/s]\n","DDIM Sampler 86% 43/50 [00:06<00:01,  6.36it/s]\n","DDIM Sampler 88% 44/50 [00:06<00:00,  6.37it/s]\n","DDIM Sampler 90% 45/50 [00:07<00:00,  6.35it/s]\n","DDIM Sampler 92% 46/50 [00:07<00:00,  6.31it/s]\n","DDIM Sampler 94% 47/50 [00:07<00:00,  6.31it/s]\n","DDIM Sampler 96% 48/50 [00:07<00:00,  6.32it/s]\n","DDIM Sampler 98% 49/50 [00:07<00:00,  6.34it/s]\n","DDIM Sampler100% 50/50 [00:07<00:00,  6.34it/s]\n","Total progress100% 50/50 [00:08<00:00,  6.05it/s]\n","Data shape for PLMS sampling is (1, 4, 64, 64)\n","Running PLMS Sampling with 50 timesteps\n","PLMS Sampler  0% 0/50 [00:00<?, ?it/s]\n","PLMS Sampler  2% 1/50 [00:00<00:17,  2.75it/s]\n","PLMS Sampler  6% 3/50 [00:00<00:09,  4.92it/s]\n","PLMS Sampler  8% 4/50 [00:00<00:08,  5.41it/s]\n","PLMS Sampler 10% 5/50 [00:00<00:07,  5.70it/s]\n","PLMS Sampler 12% 6/50 [00:01<00:07,  5.86it/s]\n","PLMS Sampler 14% 7/50 [00:01<00:07,  5.99it/s]\n","PLMS Sampler 16% 8/50 [00:01<00:06,  6.06it/s]\n","PLMS Sampler 18% 9/50 [00:01<00:06,  6.18it/s]\n","PLMS Sampler 20% 10/50 [00:01<00:06,  6.26it/s]\n","PLMS Sampler 22% 11/50 [00:01<00:06,  6.28it/s]\n","PLMS Sampler 24% 12/50 [00:02<00:06,  6.25it/s]\n","PLMS Sampler 26% 13/50 [00:02<00:05,  6.29it/s]\n","PLMS Sampler 28% 14/50 [00:02<00:05,  6.31it/s]\n","PLMS Sampler 30% 15/50 [00:02<00:05,  6.34it/s]\n","PLMS Sampler 32% 16/50 [00:02<00:05,  6.31it/s]\n","PLMS Sampler 34% 17/50 [00:02<00:05,  6.29it/s]\n","PLMS Sampler 36% 18/50 [00:03<00:05,  6.32it/s]\n","PLMS Sampler 38% 19/50 [00:03<00:04,  6.31it/s]\n","PLMS Sampler 40% 20/50 [00:03<00:04,  6.33it/s]\n","PLMS Sampler 42% 21/50 [00:03<00:04,  6.33it/s]\n","PLMS Sampler 44% 22/50 [00:03<00:04,  6.32it/s]\n","PLMS Sampler 46% 23/50 [00:03<00:04,  6.34it/s]\n","PLMS Sampler 48% 24/50 [00:03<00:04,  6.35it/s]\n","PLMS Sampler 50% 25/50 [00:04<00:03,  6.30it/s]\n","PLMS Sampler 52% 26/50 [00:04<00:03,  6.29it/s]\n","PLMS Sampler 54% 27/50 [00:04<00:03,  6.28it/s]\n","PLMS Sampler 56% 28/50 [00:04<00:03,  6.28it/s]\n","PLMS Sampler 58% 29/50 [00:04<00:03,  6.28it/s]\n","PLMS Sampler 60% 30/50 [00:04<00:03,  6.31it/s]\n","PLMS Sampler 62% 31/50 [00:05<00:03,  6.28it/s]\n","PLMS Sampler 64% 32/50 [00:05<00:02,  6.26it/s]\n","PLMS Sampler 66% 33/50 [00:05<00:02,  6.25it/s]\n","PLMS Sampler 68% 34/50 [00:05<00:02,  6.24it/s]\n","PLMS Sampler 70% 35/50 [00:05<00:02,  6.24it/s]\n","PLMS Sampler 72% 36/50 [00:05<00:02,  6.25it/s]\n","PLMS Sampler 74% 37/50 [00:06<00:02,  6.25it/s]\n","PLMS Sampler 76% 38/50 [00:06<00:01,  6.22it/s]\n","PLMS Sampler 78% 39/50 [00:06<00:01,  6.22it/s]\n","PLMS Sampler 80% 40/50 [00:06<00:01,  6.24it/s]\n","PLMS Sampler 82% 41/50 [00:06<00:01,  6.29it/s]\n","PLMS Sampler 84% 42/50 [00:06<00:01,  6.27it/s]\n","PLMS Sampler 86% 43/50 [00:07<00:01,  6.24it/s]\n","PLMS Sampler 88% 44/50 [00:07<00:00,  6.24it/s]\n","PLMS Sampler 90% 45/50 [00:07<00:00,  6.19it/s]\n","PLMS Sampler 92% 46/50 [00:07<00:00,  6.19it/s]\n","PLMS Sampler 94% 47/50 [00:07<00:00,  6.21it/s]\n","PLMS Sampler 96% 48/50 [00:07<00:00,  6.23it/s]\n","PLMS Sampler 98% 49/50 [00:08<00:00,  6.24it/s]\n","PLMS Sampler100% 50/50 [00:08<00:00,  6.13it/s]\n","Total progress100% 50/50 [00:08<00:00,  5.96it/s]\n","Interrupted with signal 2 in <frame at 0x7fc82ddbda00, file '/content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py', line 108, code wait_on_server>\n","Traceback (most recent call last):\n","  File \"/content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py\", line 194, in <module>\n","    webui()\n","  File \"/content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py\", line 170, in webui\n","    wait_on_server(shared.demo)\n","  File \"/content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py\", line 108, in wait_on_server\n","    time.sleep(0.5)\n","  File \"/content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py\", line 85, in sigint_handler\n","    print(f'Interrupted with signal {sig} in {frame}')\n","  File \"/content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py\", line 85, in sigint_handler\n","    print(f'Interrupted with signal {sig} in {frame}')\n","RuntimeError: reentrant call inside <_io.BufferedWriter name='<stdout>'>\n","^C\n"]}],"source":["#@markdown # Start stable-diffusion\n","from IPython.utils import capture\n","import time\n","import sys\n","import fileinput\n","\n","Model_Version = \"1.5\" #@param [\"1.5\", \"V2.1-512\", \"V2.1-768\"]\n","#@markdown  - Important! Choose the correct version and resolution of the model\n","\n","Use_Gradio_Server = False #@param {type:\"boolean\"}\n","#@markdown  - Only if you have trouble connecting to the local server\n","\n","Enable_API = False #@param {type:\"boolean\"}\n","#@markdown  - You can find the docs in the [wiki](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/API)\n","   \n","with capture.capture_output() as cap: \n","  if not os.path.exists('/tools/node/bin/lt'):\n","    !npm install -g localtunnel\n","\n","with capture.capture_output() as cap: \n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/\n","  time.sleep(1)\n","  !wget -O webui.py https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-webui/master/webui.py\n","  !sed -i 's@ui.create_ui().*@ui.create_ui();shared.demo.queue(concurrency_count=10)@' /content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py\n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui/modules/\n","  !wget -O ui.py https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-webui/master/modules/ui.py\n","  !sed -i 's@css = \"\".*@with open(os.path.join(script_path, \"style.css\"), \"r\", encoding=\"utf8\") as file:\\n        css = file.read()@' /content/gdrive/MyDrive/sd/stable-diffusion-webui/modules/ui.py\n","  %cd /content/gdrive/MyDrive/sd/stable-diffusion-webui\n","  !wget -O style.css https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-webui/master/style.css\n","  !sed -i 's@min-height: 4.*@min-height: 5.5em;@g' /content/gdrive/MyDrive/sd/stable-diffusion-webui/style.css\n","  !sed -i \"s@'extensions/depthmap2mask/scripts/depthmap_for_depth2img.py'@\\\"/content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/depthmap2mask/scripts/depthmap_for_depth2img.py\\\"@\" /content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/depthmap2mask/scripts/depth2image_depthmask.py\n","  !sed -i 's@\"repositories/BoostingMonocularDepth\"@\\\"/content/gdrive/MyDrive/sd/stablediffusion/repositories/BoostingMonocularDepth\\\"@' /content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/stable-diffusion-webui-depthmap-script/scripts/depthmap.py\n","  !sed -i 's@\"multiple_tqdm\": true,@\\\"multiple_tqdm\": false,@' /content/gdrive/MyDrive/sd/stable-diffusion-webui/config.json  \n","  %cd /content\n","\n","\n","share=''\n","if Use_Gradio_Server:\n","  share='--share'\n","  for line in fileinput.input('/usr/local/lib/python3.8/dist-packages/gradio/blocks.py', inplace=True):\n","    if line.strip().startswith('self.server_name ='):\n","        line = '            self.server_name = server_name\\n'\n","    if line.strip().startswith('self.server_port ='):\n","        line = '            self.server_port = server_port\\n'\n","    sys.stdout.write(line)\n","  clear_output()\n","  \n","else:\n","  share=''\n","  !nohup lt --port 7860 > srv.txt 2>&1 &\n","  time.sleep(2)\n","  !grep -o 'https[^ ]*' /content/srv.txt >srvr.txt\n","  time.sleep(2)\n","  srv= getoutput('cat /content/srvr.txt')\n","\n","  for line in fileinput.input('/usr/local/lib/python3.8/dist-packages/gradio/blocks.py', inplace=True):\n","    if line.strip().startswith('self.server_name ='):\n","        line = f'            self.server_name = \"{srv[8:]}\"\\n'\n","    if line.strip().startswith('self.server_port ='):\n","        line = '            self.server_port = 443\\n'\n","    if line.strip().startswith('self.protocol = \"https\"'):\n","        line = '            self.protocol = \"https\"\\n'\n","    if line.strip().startswith('if self.local_url.startswith(\"https\") or self.is_colab'):\n","        line = ''    \n","    if line.strip().startswith('else \"http\"'):\n","        line = ''              \n","    sys.stdout.write(line)\n","          \n","  !sed -i '13s@.*@    \"PUBLIC_SHARE_TRUE\": \"\u001b[32mConnected\",@' /usr/local/lib/python3.8/dist-packages/gradio/strings.py\n","  \n","  !rm /content/srv.txt\n","  !rm /content/srvr.txt\n","\n","with capture.capture_output() as cap: \n","  %cd /content/gdrive/MyDrive/sd/stablediffusion\n","\n","api = '--api' if Enable_API else ''\n","\n","if Model_Version == \"V2.1-768\":\n","  configf=\"--config /content/gdrive/MyDrive/sd/stablediffusion/configs/stable-diffusion/v2-inference-v.yaml\"\n","  !sed -i 's@def load_state_dict(checkpoint_path: str, map_location.*@def load_state_dict(checkpoint_path: str, map_location=\"cuda\"):@' /usr/local/lib/python3.8/dist-packages/open_clip/factory.py  \n","elif Model_Version == \"V2.1-512\":\n","  configf=\"--config /content/gdrive/MyDrive/sd/stablediffusion/configs/stable-diffusion/v2-inference.yaml\"\n","  !sed -i 's@def load_state_dict(checkpoint_path: str, map_location.*@def load_state_dict(checkpoint_path: str, map_location=\"cuda\"):@' /usr/local/lib/python3.8/dist-packages/open_clip/factory.py  \n","else:\n","  configf=\"\"\n","  !sed -i 's@def load_state_dict(checkpoint_path: str, map_location.*@def load_state_dict(checkpoint_path: str, map_location=\"cpu\"):@' /usr/local/lib/python3.8/dist-packages/open_clip/factory.py  \n","\n","if os.path.exists('/usr/local/lib/python3.8/dist-packages/xformers'):\n","  xformers=\"--xformers\" \n","else:\n","  xformers=\"\"\n","\n","try:\n","  model\n","  if os.path.isfile(model):\n","    !python /content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py $share $api --disable-safe-unpickle --no-half-vae  --ckpt \"$model\" $configf $xformers\n","  else:\n","    !python /content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py $share $api --disable-safe-unpickle --no-half-vae  --ckpt-dir \"$model\" $configf $xformers\n","except:\n","   !python /content/gdrive/MyDrive/sd/stable-diffusion-webui/webui.py $share $api --disable-safe-unpickle --no-half-vae $configf $xformers"]},{"cell_type":"markdown","metadata":{"id":"eqmOBfq80GBz"},"source":["=========================== Opt2. ========================\n"]},{"cell_type":"markdown","metadata":{"id":"ToNG4fd_dTbF"},"source":["## Inference => 실행하지 말 것."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":18869,"status":"ok","timestamp":1671258324727,"user":{"displayName":"신재영(일반대학원 실내건축학과)","userId":"14387952987481110421"},"user_tz":-540},"id":"gW15FjffdTID","outputId":"1c6ec755-3fc3-4371-ddba-bbb104c646ad"},"outputs":[{"name":"stderr","output_type":"stream","text":["The config attributes {'upcast_attention': True} were passed to UNet2DConditionModel, but are not expected and will be ignored. Please verify your config.json configuration file.\n","/usr/local/lib/python3.8/dist-packages/diffusers/utils/deprecation_utils.py:35: FutureWarning: The configuration file of this scheduler: DDIMScheduler {\n","  \"_class_name\": \"DDIMScheduler\",\n","  \"_diffusers_version\": \"0.9.0\",\n","  \"beta_end\": 0.012,\n","  \"beta_schedule\": \"scaled_linear\",\n","  \"beta_start\": 0.00085,\n","  \"clip_sample\": false,\n","  \"num_train_timesteps\": 1000,\n","  \"prediction_type\": \"epsilon\",\n","  \"set_alpha_to_one\": false,\n","  \"steps_offset\": 0,\n","  \"trained_betas\": null\n","}\n"," is outdated. `steps_offset` should be set to 1 instead of 0. Please make sure to update the config accordingly as leaving `steps_offset` might led to incorrect results in future versions. If you have downloaded this checkpoint from the Hugging Face Hub, it would be very nice if you could open a Pull request for the `scheduler/scheduler_config.json` file\n","  warnings.warn(warning + message, FutureWarning)\n"]}],"source":["import torch\n","from torch import autocast\n","from diffusers import StableDiffusionPipeline, DDIMScheduler\n","from IPython.display import display\n","\n","model_path = WEIGHTS_DIR             # If you want to use previously trained model saved in gdrive, replace this with the full path of model in gdrive\n","\n","scheduler = DDIMScheduler(beta_start=0.00085, beta_end=0.012, beta_schedule=\"scaled_linear\", clip_sample=False, set_alpha_to_one=False)\n","pipe = StableDiffusionPipeline.from_pretrained(model_path, scheduler=scheduler, safety_checker=None, torch_dtype=torch.float16).to(\"cuda\")\n","\n","g_cuda = None"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":342,"status":"ok","timestamp":1671258327302,"user":{"displayName":"신재영(일반대학원 실내건축학과)","userId":"14387952987481110421"},"user_tz":-540},"id":"oIzkltjpVO_f","outputId":"65f1c31c-51ce-4f83-fd9a-4d4baa20c410"},"outputs":[{"data":{"text/plain":["<torch._C.Generator at 0x7f70ed3cb890>"]},"execution_count":18,"metadata":{},"output_type":"execute_result"}],"source":["#@markdown Can set random seed here for reproducibility.\n","g_cuda = torch.Generator(device='cuda')\n","seed = 52362 #@param {type:\"number\"}\n","g_cuda.manual_seed(seed)"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"K6xoHWSsbcS3","scrolled":false},"outputs":[],"source":["#@title Run for generating images.\n","\n","prompt = \"architectural photography of fhrh logo attached to wall in office space, high ceiling with pandant lighting\" #@param {type:\"string\"}\n","negative_prompt = \"\" #@param {type:\"string\"}\n","num_samples = 4 #@param {type:\"number\"}\n","guidance_scale = 7.5 #@param {type:\"number\"}\n","num_inference_steps = 50 #@param {type:\"number\"}\n","height = 512 #@param {type:\"number\"}\n","width = 512 #@param {type:\"number\"}\n","\n","with autocast(\"cuda\"), torch.inference_mode():\n","    images = pipe(\n","        prompt,\n","        height=height,\n","        width=width,\n","        negative_prompt=negative_prompt,\n","        num_images_per_prompt=num_samples,\n","        num_inference_steps=num_inference_steps,\n","        guidance_scale=guidance_scale,\n","        generator=g_cuda\n","    ).images\n","\n","for img in images:\n","    display(img)"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"WMCqQ5Tcdsm2"},"outputs":[],"source":["#@markdown Run Gradio UI for generating images.\n","import gradio as gr\n","\n","def inference(prompt, negative_prompt, num_samples, height=512, width=512, num_inference_steps=50, guidance_scale=7.5):\n","    with torch.autocast(\"cuda\"), torch.inference_mode():\n","        return pipe(\n","                prompt, height=int(height), width=int(width),\n","                negative_prompt=negative_prompt,\n","                num_images_per_prompt=int(num_samples),\n","                num_inference_steps=int(num_inference_steps), guidance_scale=guidance_scale,\n","                generator=g_cuda\n","            ).images\n","\n","with gr.Blocks() as demo:\n","    with gr.Row():\n","        with gr.Column():\n","            prompt = gr.Textbox(label=\"Prompt\", value=\"photo of zwx dog in a bucket\")\n","            negative_prompt = gr.Textbox(label=\"Negative Prompt\", value=\"\")\n","            run = gr.Button(value=\"Generate\")\n","            with gr.Row():\n","                num_samples = gr.Number(label=\"Number of Samples\", value=4)\n","                guidance_scale = gr.Number(label=\"Guidance Scale\", value=7.5)\n","            with gr.Row():\n","                height = gr.Number(label=\"Height\", value=512)\n","                width = gr.Number(label=\"Width\", value=512)\n","            num_inference_steps = gr.Slider(label=\"Steps\", value=50)\n","        with gr.Column():\n","            gallery = gr.Gallery()\n","\n","    run.click(inference, inputs=[prompt, negative_prompt, num_samples, height, width, num_inference_steps, guidance_scale], outputs=gallery)\n","\n","demo.launch(debug=True)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":282},"executionInfo":{"elapsed":8,"status":"error","timestamp":1671260726424,"user":{"displayName":"신재영(일반대학원 실내건축학과)","userId":"14387952987481110421"},"user_tz":-540},"id":"lJoOgLQHnC8L","outputId":"3d274163-bbd8-4ff9-d591-364d15bf97f5"},"outputs":[{"name":"stdout","output_type":"stream","text":["mkdir: missing operand\n","Try 'mkdir --help' for more information.\n"]},{"ename":"NameError","evalue":"ignored","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)","\u001b[0;32m<ipython-input-14-63c678a115a2>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m\u001b[0m\n\u001b[1;32m      8\u001b[0m \u001b[0;32mfrom\u001b[0m \u001b[0mglob\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mglob\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      9\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mos\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m---> 10\u001b[0;31m \u001b[0;32mfor\u001b[0m \u001b[0mf\u001b[0m \u001b[0;32min\u001b[0m \u001b[0mglob\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mOUTPUT_DIR\u001b[0m\u001b[0;34m+\u001b[0m\u001b[0mos\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0msep\u001b[0m\u001b[0;34m+\u001b[0m\u001b[0;34m\"*\"\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     11\u001b[0m     \u001b[0;32mif\u001b[0m \u001b[0mf\u001b[0m \u001b[0;34m!=\u001b[0m \u001b[0mWEIGHTS_DIR\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     12\u001b[0m         \u001b[0mshutil\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mrmtree\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mf\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mNameError\u001b[0m: name 'OUTPUT_DIR' is not defined"]}],"source":["#@title (Optional) Delete diffuser and old weights and only keep the ckpt to free up drive space.\n","\n","#@markdown [ ! ] Caution, Only execute if you are sure u want to delete the diffuser format weights and only use the ckpt.\n","\n","import shutil\n","from glob import glob\n","import os\n","for f in glob(OUTPUT_DIR+os.sep+\"*\"):\n","    if f != WEIGHTS_DIR:\n","        shutil.rmtree(f)\n","        print(\"Deleted\", f)\n","for f in glob(WEIGHTS_DIR+\"/*\"):\n","    if not f.endswith(\".ckpt\") or not f.endswith(\".json\"):\n","        try:\n","            shutil.rmtree(f)\n","        except NotADirectoryError:\n","            continue\n","        print(\"Deleted\", f)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"jXgi8HM4c-DA"},"outputs":[],"source":["#@title Free runtime memory\n","exit()"]}],"metadata":{"accelerator":"GPU","colab":{"collapsed_sections":["ToNG4fd_dTbF"],"machine_shape":"hm","provenance":[{"file_id":"1h8irk8kODZMwU1d9dk1YRTdeuCXkUM66","timestamp":1671499121677},{"file_id":"1Co3FjZJUeL7reMbPhDgR5zo8Hs-z9TDp","timestamp":1671282552919},{"file_id":"https://github.com/ShivamShrirao/diffusers/blob/main/examples/dreambooth/DreamBooth_Stable_Diffusion.ipynb","timestamp":1671110791218}]},"gpuClass":"standard","kernelspec":{"display_name":"Python 3 (ipykernel)","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.10.8"},"vscode":{"interpreter":{"hash":"e7370f93d1d0cde622a1f8e1c04877d8463912d04d973331ad4851f04de6915a"}}},"nbformat":4,"nbformat_minor":0}